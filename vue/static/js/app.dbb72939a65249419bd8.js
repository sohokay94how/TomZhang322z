webpackJsonp([1],{"1z3s":function(e,t){},"2JhT":function(e,t){},"3psk":function(e,t){},"7Otq":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTk2QkI4RkE3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTk2QkI4Rjk3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjU2QTEyNzk3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjU2QTEyN0E3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5WHowqAAAXNElEQVR42uxda4xd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"},Egef:function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("7+uW"),s={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("ul",{staticClass:"sidebar"},[o("li",[o("router-link",{attrs:{to:"/"}},[e._v("Hello world!")])],1),o("li",[o("router-link",{attrs:{to:"/base"}},[e._v("基本功能使用")])],1),o("li",[o("router-link",{attrs:{to:"/import"}},[e._v("简单的数据导入")])],1),o("li",[o("router-link",{attrs:{to:"/dragadd"}},[e._v("拖拽操作方式添加块元素")])],1),o("li",[o("router-link",{attrs:{to:"/readonly"}},[e._v("只读模式")])],1),o("li",[o("router-link",{attrs:{to:"/spnode"}},[e._v("特殊形状的节点")])],1),o("li",[o("router-link",{attrs:{to:"/custom"}},[e._v("自定义背景图节点")])],1),o("li",[o("router-link",{attrs:{to:"/multi"}},[e._v("多选功能操作")])],1),o("li",[o("router-link",{attrs:{to:"/navmap"}},[e._v("实时的缩略导航图")])],1),o("li",[o("router-link",{attrs:{to:"/export"}},[e._v("导出流程图片")])],1),o("li",[o("router-link",{attrs:{to:"/xml"}},[e._v("BPMN2.0 XML数据支持")])],1)]),o("div",{staticStyle:{"padding-left":"201px",overflow:"hidden"}},[o("div",{staticClass:"content"},[o("router-view")],1)])])},staticRenderFns:[]};var r=o("VU/8")({name:"App"},s,!1,function(e){o("nk+h")},null,null).exports,n=o("/ocq"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hello"},[t("img",{attrs:{src:o("7Otq")}}),t("h1",[this._v(this._s(this.msg))]),t("h2",[this._v("Essential Links")]),this._m(0),t("h2",[this._v("Ecosystem")]),this._m(1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[this._v("\n          Core Docs\n        ")])]),t("li",[t("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[this._v("\n          Forum\n        ")])]),t("li",[t("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[this._v("\n          Community Chat\n        ")])]),t("li",[t("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[this._v("\n          Twitter\n        ")])]),t("br"),t("li",[t("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[this._v("\n          Docs for This Template\n        ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n          vue-router\n        ")])]),t("li",[t("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n          vuex\n        ")])]),t("li",[t("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n          vue-loader\n        ")])]),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n          awesome-vue\n        ")])])])}]};var l,h,p=o("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},a,!1,function(e){o("3psk")},"data-v-33dd3456",null).exports,d=o("BO1k"),c=o.n(d),f=o("pFYg"),u=o.n(f),m=o("woOf"),g=o.n(m),v=o("fZjL"),$=o.n(v),y=function(e){return e||(e=window.event),e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.documentElement.scrollLeft-document.body.clientLeft,y:e.clientY+document.documentElement.scrollTop-document.body.clientTop}},w=function(e){var t=e.offsetTop,o=e.offsetLeft;for(e=e.offsetParent;e;)t+=e.offsetTop,o+=e.offsetLeft,e=e.offsetParent;return{top:t,left:o}},b={mouseP:y,elCsys:w,getCoor:function(e,t){var o=y(e),i=w(t);return{X:o.x-i.left+t.parentNode.scrollLeft,Y:o.y-i.top+t.parentNode.scrollTop}},calcPolyPoints:function(e,t,o,i,s,r,n){n||(n=1);var a={left:e.left*n,top:e.top*n,width:e.width*n,height:e.height*n},l={left:t.left*n,top:t.top*n,width:t.width*n,height:t.height*n},h=s*n,p=i*n,d=r*n,c={x:a.left+a.width/2,y:a.top+a.height/2},f={x:l.left+l.width/2,y:l.top+l.height/2},u=[],m=[],g=[],v=[],$=void 0,y=void 0;return $=[c.x,c.y],y=[f.x,f.y],"lr"===o?(m=[h,p],g=[h,d],v=[f.x,d],(u=[c.x,p])[1]>a.top&&u[1]<a.top+a.height?(u[0]=m[0]<c.x?a.left:a.left+a.width,$[0]=u[0],$[1]=u[1]):$[1]=u[1]<a.top?a.top:a.top+a.height,u[0]===$[0]&&u[1]===$[1]&&(m[0]>a.left&&m[0]<a.left+a.width?(m[1]=c.y>g[1]?a.top:a.top+a.height,$[0]=m[0],$[1]=m[1],u[0]=m[0],u[1]=m[1]):($[0]=m[0]<a.left?a.left:a.left+a.width,u[0]=$[0])),v[1]>l.top&&v[1]<l.top+l.height?(v[0]=g[0]>f.x?l.left+l.width:l.left,y[0]=v[0],y[1]=v[1]):y[1]=v[1]<l.top?l.top:l.top+l.height,v[0]===y[0]&&v[1]===y[1]&&(g[0]>l.left&&g[0]<l.left+l.width?(g[1]=f.y>m[1]?l.top:l.top+l.height,y[0]=g[0],y[1]=g[1],v[0]=g[0],v[1]=g[1]):(y[0]=g[0]<l.left?l.left:l.left+l.width,v[0]=y[0]))):"tb"===o&&(m=[p,h],g=[d,h],v=[d,f.y],(u=[p,c.y])[0]>a.left&&u[0]<a.left+a.width?(u[1]=m[1]<c.y?a.top:a.top+a.height,$[0]=u[0],$[1]=u[1]):$[0]=u[0]<a.left?a.left:a.left+a.width,u[0]===$[0]&&u[1]===$[1]&&(m[1]>a.top&&m[1]<a.top+a.height?(m[0]=c.x>g[0]?a.left:a.left+a.width,$[0]=m[0],$[1]=m[1],u[0]=m[0],u[1]=m[1]):($[1]=m[1]<a.top?a.top:a.top+a.height,u[1]=$[1])),v[0]>l.left&&v[0]<l.left+l.width?(v[1]=g[1]>f.y?l.top+l.height:l.top,y[0]=v[0],y[1]=v[1]):y[0]=v[0]<l.left?l.left:l.left+l.width,v[0]===y[0]&&v[1]===y[1]&&(g[1]>l.top&&g[1]<l.top+l.height?(g[0]=f.x>m[0]?l.left:l.left+l.width,y[0]=g[0],y[1]=g[1],v[0]=g[0],v[1]=g[1]):(y[1]=g[1]<l.top?l.top:l.top+l.height,v[1]=y[1]))),{start:$,m0:u,m1:m,m2:g,m3:v,end:y}},getMValue:function(e,t,o,i){return i||(i=1),"lr"===o?(e.left*i+e.width*i/2+t.left*i+t.width*i/2)/2:"tb"===o?(e.top*i+e.height*i/2+t.top*i+t.height*i/2)/2:void 0},calcStartEnd:function(e,t,o){o||(o=1);var i=void 0,s=void 0,r=void 0,n=void 0,a=e.left*o,l=e.left*o+e.width*o,h=t.left*o,p=t.left*o+t.width*o;a>=p?(i=a,r=p):l<=h?(i=l,r=h):a<=h&&l>=h&&l<=p?r=i=(l+h)/2:a>=h&&l<=p?r=i=(a+l)/2:h>=a&&p<=l?r=i=(h+p)/2:a<=p&&l>=p&&(r=i=(a+p)/2);var d=e.top*o,c=e.top*o+e.height*o,f=t.top*o,u=t.top*o+t.height*o;return d>=u?(s=d,n=u):c<=f?(s=c,n=f):d<=f&&c>=f&&c<=u?n=s=(c+f)/2:d>=f&&c<=u?n=s=(d+c)/2:f>=d&&u<=c?n=s=(f+u)/2:d<=u&&c>=u&&(n=s=(d+u)/2),{start:[i,s],end:[r,n]}},drawRect:function(e,t,o,i){if(o[0]!==t[0]||o[1]!==t[1]){for(var s="",r=[o[0],o[1]],n=0;n<r.length;++n){var a=(r[n]-t[n])/2;a>0?r[n]-=e>a?a:e:a<0&&(r[n]+=e>-a?-a:e)}s+=" L "+r[0]+" "+r[1]+" Q "+o[0]+" "+o[1],r=[o[0],o[1]];for(var l=0;l<r.length;++l){var h=(r[l]-i[l])/2;h>0?r[l]-=e>h?h:e:h<0&&(r[l]+=e>-h?-h:e)}return s+=" "+r[0]+" "+r[1]}},stopEventPop:function(e){e||(e=window.event),window.event?e.cancelBubble=!0:e.stopPropagation()},preventDefault:function(e){window.event?window.event.returnValue=!1:e.preventDefault()},isDrawingLine:function(e){var t="object"===(void 0===e?"undefined":u()(e))?e.prop.$nowType:e;return"direct"===t||"dirDashed"===t||"segment"===t||"segDashed"===t},getRealStyle:function(e){var t=null;try{t=getComputedStyle(e,"style")}catch(o){t=getStyle(e,"style")}return t}},x=function(e,t){for(var o=0;o<t.length;++o)if(e==t[o])return!0;return!1},k=function(e,t,o,i,s){"function"==typeof s&&e.addEventListener(t,function(t){t||(t=window.event);for(var r=e.querySelectorAll(o),n=t.target;n!==e&&!x(n,r);)n=n.parentNode;return n&&n!==e&&(t.data=i,!1===s(t,n)&&function(e){e||(e=window.event),window.event?e.cancelBubble=!0:e.stopPropagation()}(t)),!1})},M={hasClass:function(e,t){return 0!==(t=t||"").replace(/\s/g,"").length&&new RegExp(" "+t+" ").test(" "+e.className+" ")},addClass:function(e,t){this.hasClass(e,t)||(e.className=""===e.className?t:e.className+" "+t)},removeClass:function(e,t){if(this.hasClass(e,t)){for(var o=" "+e.className.replace(/[\t\r\n]/g,"")+" ";o.indexOf(" "+t+" ")>=0;)o=o.replace(" "+t+" "," ");e.className=o.replace(/^\s+|\s+$/g,"")}},css:function(e,t){for(var o in t)e.style[o]=t[o]}},_={methods:{_renameTxtHide:function(){this.$refs.$textArea.value="",this.$refs.$textArea.removeAttribute("data-id"),this.$refs.$textArea.style.display="none"},_renameTxtShow:function(e){for(var t in e)this.$refs.$textArea.style[t]="number"==typeof e[t]?e[t]+"px":e[t];this.$refs.$textArea.style.display="block"},_renderHeadBtnClick:function(e){switch(e){case"ico_new":null!==this.onBtnNewClick&&this.onBtnNewClick();break;case"ico_open":null!==this.onBtnOpenClick&&this.onBtnOpenClick();break;case"ico_save":null!==this.onBtnSaveClick&&this.onBtnSaveClick();break;case"ico_undo":this.undo();break;case"ico_redo":this.redo();break;case"ico_reload":null!==this.onFreshClick&&this.onFreshClick();break;case"ico_print":null!==this.onPrintClick&&this.onPrintClick();break;default:var t=e.split("ico_")[1];void 0!==this.prop.$headBtnEvents&&"function"==typeof this.prop.$headBtnEvents[t]&&this.prop.$headBtnEvents[t].call(this)}},_initOperStack:function(){this.isUndo=0,this.pushOper=function(e,t){1===this.isUndo?(this.prop.$redoStack.push([e,t]),this.isUndo=0,this.prop.$redoStack.length>50&&this.prop.$redoStack.shift()):(this.prop.$undoStack.push([e,t]),this.prop.$undoStack.length>50&&this.prop.$undoStack.shift(),0===this.isUndo&&this.prop.$redoStack.splice(0,this.prop.$redoStack.length),this.isUndo=0)},this.pushExternalOper=function(e,t){this.pushOper("externalFunc",[e,t])},this.undo=function(){if(0!==this.prop.$undoStack.length){this.blurItem();var e=this.prop.$undoStack.pop();this.isUndo=1,"externalFunc"===e[0]?e[1][0](e[1][1]):this[e[0]].apply(this,e[1])}},this.redo=function(){if(0!==this.prop.$redoStack.length){this.blurItem();var e=this.prop.$redoStack.pop();this.isUndo=2,"externalFunc"===e[0]?e[1][0](e[1][1]):this[e[0]].apply(this,e[1])}}},_node2Area:function(e){if(this.extFlag.group){var t=this.prop.$nodes[e],o=!1;for(var i in this.prop.$areas){var s=this.prop.$areas[i];if(t.left>=s.left&&t.left<s.left+s.width&&t.top>=s.top&&t.top<s.top+s.height){this.prop.$nodes[e].areaId=i,o=!0;break}}o||delete this.prop.$nodes[e].areaId}},_setPolyCoor:function(e,t,o,i,s,r){var n=this.prop.$lines[e];if(!n||t<0||n[o]===t||!n.type||"sl"===n.type)return!1;if(!1!==s&&"function"==typeof this.onLineMove&&!1===this.onLineMove(e,t,o||"M"))return!1;if("function"==typeof this.pushOper&&!i){var a=[e,n[o]];this.pushOper("setLine"+o,a)}n[o]=t,this.prop.$editable&&(n.alt=!0),this.$set(this.prop.$lines[e],n),!r&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})},_resetLines:function(e){for(var t in this.prop.$lines){var o=this.prop.$lines[t];o.from!==e&&o.to!==e||this.$set(this.prop.$lines,t,o)}},_suitSize:function(){var e=0,t=0;for(var o in this.prop.$nodes){var i=this.prop.$nodes[o];e<i.width+i.left&&(e=i.width+i.left),t<i.height+i.top&&(t=i.height+i.top)}if(null!=this.$refs.$group)for(var s in this.prop.$areas){var r=this.prop.$areas[s];e<r.width+r.left&&(e=r.width+r.left),t<r.height+r.top&&(t=r.height+r.top)}for(var n in this.prop.$lines){var a=this.prop.$lines[n];""!==a.M&&"lt"===a.type&&e<a.M&&(e=a.M+4),""!==a.M&&"tb"===a.type&&t<a.M&&(t=a.M+4)}if(null!=this.$refs.$paper)for(var l in this.prop.$memos){var h=this.prop.$memos[l];e<h.width+h.left&&(e=h.width+h.left),t<h.height+h.top&&(t=h.height+h.top)}return{width:e*this.scale,height:t*this.scale}},_buildWorkSize:function(){for(var e=this.$refs.$workArea.parentNode,t=e.offsetWidth,o=e.offsetHeight,i=this._suitSize();i.width>t;)t+=this.prop.$workExtendStep;for(;i.height>o;)o+=this.prop.$workExtendStep;return{width:t,height:o,haveData:i.width>0&&i.height>0}},_bindMoveEvent:function(e,t,o,i,s,r){var n=b.mouseP(e),a=this.t;i||(i="move");var l=this.$refs.$workArea,h=0,p=0,d=e.id,c=n.x-a.left+l.parentNode.scrollLeft,f=n.y-a.top+l.parentNode.scrollTop,m=this.$refs.$ghost;"move"!==i?(m.show({width:t.width*this.scale+"px",height:t.height*this.scale+"px",top:t.top*this.scale+a.top-l.parentNode.scrollTop+"px",left:t.left*this.scale+a.left-l.parentNode.scrollLeft+"px",cursor:i}),h=t.left*this.scale+t.width*this.scale-c,p=t.top*this.scale+t.height*this.scale-f):(h=c-t.left*this.scale,p=f-t.top*this.scale);var g=!1,v=this;document.onmousemove=function(e){e||(e=window.event);var o=b.mouseP(e);if("move"!==i)switch(c=o.x-a.left+l.parentNode.scrollLeft-t.left*v.scale+h,f=o.y-a.top+l.parentNode.scrollTop-t.top*v.scale+p,c<s*v.scale&&(c=s*v.scale),f<r*v.scale&&(f=r*v.scale),i){case"nw-resize":m.show({width:c+"px",height:f+"px"});break;case"w-resize":m.show({width:c+"px"});break;case"n-resize":m.show({height:f+"px"})}else{if(c===o.x-h&&f===o.y-p)return b.stopEventPop(e),!1;if(c=o.x-h,f=o.y-p,m.inShow()||m.css({width:t.width*v.scale+"px",height:t.height*v.scale+"px",top:t.top*v.scale+a.top-l.parentNode.scrollTop+"px",left:t.left*v.scale+a.left-l.parentNode.scrollLeft+"px",cursor:"move"}),g&&m.show(),c<a.left-l.parentNode.scrollLeft&&!t.canOver?c=a.left-l.parentNode.scrollLeft:c+l.parentNode.scrollLeft+t.width*v.scale>a.left+l.offsetWidth&&!t.canOver&&(c=a.left+l.offsetWidth-l.parentNode.scrollLeft-t.width*v.scale),f<a.top-l.parentNode.scrollTop&&!t.canOver?f=a.top-l.parentNode.scrollTop:f+l.parentNode.scrollTop+t.height*v.scale>a.top+l.offsetHeight&&!t.canOver&&(f=a.top+l.offsetHeight-l.parentNode.scrollTop-t.height*v.scale),g?m.show({left:c+"px",top:f+"px"}):m.css({left:c+"px",top:f+"px"}),u()(v.extFlag.autoalign)){var n=v._locAlignLine(d,m,v.prop.$nowType);v._magnetic(m,n),v.$nextTick(function(){c=parseInt(m.$el.style.left.split("px")[0],10),f=parseInt(m.$el.style.top.split("px")[0],10)})}}g=!0},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null;var e=(c+l.parentNode.scrollLeft-a.left)/v.scale,t=(f+l.parentNode.scrollTop-a.top)/v.scale,s=m.offsetSize();m.hide();var r=s.width/v.scale,n=s.height/v.scale;u()(v.extFlag.autoalign)&&(v.$refs.$alignH.style.display="none",v.$refs.$alignV.style.display="none"),o&&"function"==typeof o&&o(g,v,i,e,t,r,n)}},_initDraw:function(){var e=this;k(this.$refs.$draw,"click","g",{},function(t,o){e.prop.$multiKey&&e._isMultiKey(t)?(e.prop.$focus===o.id&&e.blurItem(),e.prop.$editable&&e.prop.$multiLines&&(e.prop.$multiLines[o.id]?e._removeFromMultiList(o.id,"line",!0):e._addtoMultiList(o.id,"line",!0))):(console.log(e.prop.$focus+" ,"+o.id),e.prop.$focus!==o.id?e.focusItem(o.id,!0):e.prop.$editable&&e.$refs.$lineOper.setTid(o.id))}),this.prop.$editable&&(k(this.$refs.$draw,"contextmenu","g",{},function(t,o){if("function"==typeof e.onItemRightClick&&!1===e.onItemRightClick(o.id,"line"))return b.preventDefault(t),!1}),k(this.$refs.$draw,"dblclick","g",{},function(t,o){if("function"!=typeof e.onItemDbClick||!1!==e.onItemDbClick(o.id,"line")){var i=o.querySelector("text").textContent,s=o.getAttribute("from").split(","),r=o.getAttribute("to").split(",");"lr"===e.prop.$lines[o.id].type?(s[0]=e.prop.$lines[o.id].M*e.scale,r[0]=s[0]):"tb"===e.prop.$lines[o.id].type&&(s[1]=e.prop.$lines[o.id].M*e.scale,r[1]=s[1]);var n=(parseInt(s[0],10)+parseInt(r[0],10))/2-64,a=(parseInt(s[1],10)+parseInt(r[1],10))/2-18,l=e.t;e.$refs.$textArea.value=i,e._renameTxtShow({width:130,height:26,left:l.left+n-e.$refs.$workArea.parentNode.scrollLeft,top:l.top+a-e.$refs.$workArea.parentNode.scrollTop}),e.$refs.$textArea.setAttribute("data-id",e.prop.$focus),e.$refs.$textArea.focus(),e.$refs.$workArea.parentNode.onmousedown=function(t){e.$refs.$workArea.parentNode.onmousedown=null,2!==t.button?(e.setName(e.$refs.$textArea.getAttribute("data-id"),e.$refs.$textArea.value,"line"),e._renameTxtHide()):b.stopEventPop(t)}}}))},_initWorkForNode:function(){var e=this;k(this.$refs.$workArea,"click",".GooFlow_item",{},function(t,o){e.prop.$focus===o.id||e.prop.$multiKey&&e._isMultiKey(t)?M.hasClass(t.target,"rs_close")&&e.prop.$editable?e.delNode(o.id):e.prop.$multiKey&&e._isMultiKey(t)&&(e.prop.$focus===o.id&&e.blurItem(),e.prop.$editable&&e.prop.$multiNodes&&(e.prop.$multiNodes[o.id]?e._removeFromMultiList(o.id,"node",!0):e._addtoMultiList(o.id,"node",!0))):e.focusItem(o.id,!0),b.stopEventPop(t)}),k(this.$refs.$workArea,"contextmenu",".GooFlow_item",{},function(t,o){if("function"==typeof e.onItemRightClick&&!1===e.onItemRightClick(o.id,"node"))return b.stopEventPop(t),!1});var t=function(e){e.$refs.$workArea.parentNode.onmousedown=function(t){if(e.$refs.$workArea.parentNode.onmousedown=null,2!==t.button){var o=e.$refs.$textArea;e.setName(o.getAttribute("data-id"),o.value,"node"),e._renameTxtHide()}else b.stopEventPop(t)}};k(this.$refs.$workArea,"dblclick",".GooFlow_item",{},function(o,i){var s=i.id;if("function"==typeof e.onItemDbClick&&!1===e.onItemDbClick(s,"node"))return!1;if(e.prop.$editable){var r=o.target,n=e.t,a=e.$refs.$textArea,l="";if("DIV"===r.tagName.toUpperCase()&&M.hasClass(r,"span"))l=r.innerHTML,a.value=l,e._renameTxtShow({height:i.offsetHeight+6,width:100,left:n.left+e.prop.$nodes[s].left*e.scale-e.$refs.$workArea.parentNode.scrollLeft-26,top:n.top+e.prop.$nodes[s].top*e.scale-e.$refs.$workArea.parentNode.scrollTop+26}),a.setAttribute("data-id",e.prop.$focus),a.focus(),t(e);else if("DIV"===r.tagName.toUpperCase()&&"TD"===r.parentNode.tagName.toUpperCase()&&M.hasClass(r.parentNode.previousSibling,"ico")||"TD"===r.tagName.toUpperCase()&&M.hasClass(r.previousSibling,"ico")){var h=i.querySelector(".ico + td");l=h.childNodes[0].innerHTML,a.value=l,e._renameTxtShow({width:h.offsetWidth+26,height:h.offsetHeight+6,left:n.left+26+e.prop.$nodes[s].left*e.scale-e.$refs.$workArea.parentNode.scrollLeft,top:n.top+2+e.prop.$nodes[s].top*e.scale-e.$refs.$workArea.parentNode.scrollTop}),a.setAttribute("data-id",e.prop.$focus),a.focus(),t(e)}}}),this.prop.$editable&&(k(this.$refs.$workArea,"mousedown",".GooFlow_item",{},function(t,o){if(2===t.button)return!1;var i=t.target;if(b.isDrawingLine(e)){var s,r,n=b.mouseP(t),a=b.elCsys(e.$refs.$workArea);s=n.x-a.left+e.$refs.$workArea.parentNode.scrollLeft,r=n.y-a.top+e.$refs.$workArea.parentNode.scrollTop,e.lineStart={x:s,y:r,id:o.id},e.$refs.$tmpLine.setState({d:"M "+s+" "+r+" L "+s+" "+r,display:"block",dash:"dirDashed"===e.prop.$nowType||"segDashed"===e.prop.$nowType,noArrow:"segment"===e.prop.$nowType||"segDashed"===e.prop.$nowType}),b.stopEventPop(t)}else if("TD"===i.tagName||"TD"===i.parentNode.tagName){if(b.isDrawingLine(e))return;if("cursor"===e.prop.$nowType&&e.$refs.$multiGhost&&e.$refs.$multiGhost.inShow())return;var l=o.childNodes[0].cloneNode(!0);e.$refs.$ghost.append(l),t.id=o.id,e._bindMoveEvent(t,e.prop.$nodes[o.id],function(e,t,i,s,r){e&&t.moveNode(o.id,s,r),o.id!==t.prop.$focus&&t.focusItem(o.id,!0)})}else if("DIV"===i.tagName.toUpperCase()&&(M.hasClass(i,"rs_bottom")||M.hasClass(i,"rs_right")||M.hasClass(i,"rs_rb"))){var h=M.hasClass(i,"rs_bottom")?"n-resize":M.hasClass(i,"rs_right")?"w-resize":"nw-resize";if("pointer"===h)return;var p=e.prop.$focus;e.switchToolBtn("cursor"),b.stopEventPop(t),e.$refs.$ghost.$el.style.cursor=h;var d=e.prop.$nodes[p];e._bindMoveEvent(t,d,function(e,t,o,i,s,r,n){e&&t.resizeNode(p,r,n)},h,104,26)}}),k(this.$refs.$workArea,"mouseup",".GooFlow_item",{},function(t,o){if(b.isDrawingLine(e)||e.$refs.$mpTo.getP()){var i=e.lineStart,s=e.lineEnd;if(i&&!e.$refs.$mpTo.getP()){var r={from:i.id,to:o.id,name:"",M:"",type:"sl"};"dirDashed"!==e.prop.$nowType&&"segDashed"!==e.prop.$nowType||(r.dash=!0),"segment"!==e.prop.$nowType&&"segDashed"!==e.prop.$nowType||(r.noArrow=!0),e.addLine((new Date).getTime(),r),e.prop.$max++}else i?e.moveLinePoints(e.prop.$focus,i.id,o.id):s&&e.moveLinePoints(e.prop.$focus,o.id,s.id)}}))},_initEditFunc:function(){var e=this;this.$refs.$workArea.addEventListener("mousemove",function(t){if((b.isDrawingLine(e)||e.$refs.$mpTo.getP())&&(e.lineStart||e.lineEnd)){var o=b.mouseP(t),i=b.elCsys(this),s=o.x-i.left+this.parentNode.scrollLeft,r=o.y-i.top+this.parentNode.scrollTop,n=e.$refs.$tmpLine.getState();e.lineStart?n.d="M "+e.lineStart.x+" "+e.lineStart.y+" L "+s+" "+r:e.lineEnd&&(n.d="M "+s+" "+r+" L "+e.lineEnd.x+" "+e.lineEnd.y),n.noArrow="segment"===e.prop.$nowType||"segDashed"===e.prop.$nowType,n.dash="dirDashed"===e.prop.$nowType||"segDashed"===e.prop.$nowType,e.$refs.$tmpLine.setState(n)}}),this.$refs.$workArea.addEventListener("mouseup",function(t){if(b.isDrawingLine(e)||e.$refs.$mpTo.getP()){var o=e.$refs.$tmpLine.getState();"none"!==o.display?(delete e.lineStart,delete e.lineEnd,o.display="none",e.$refs.$tmpLine.setState(o),e.$refs.$mpTo.hide(),e.$refs.$mpFrom.hide(),e.focusItem(e.prop.$focus,!1)):e.$refs.$lineOper.setTid(0)}}),this.$refs.$workArea.addEventListener("keydown",function(t){if(!e.$refs.$ghost.inShow()&&"none"===e.$refs.$textArea.style.display)switch(t.keyCode){case 46:if(""!==e.prop.$focus)e.delNode(e.prop.$focus,!0),e.delLine(e.prop.$focus);else if("cursor"===e.prop.$nowType&&e.$refs.$multiGhost&&e.$refs.$multiGhost.inShow()){var o=[],i=[];for(var s in e.prop.$multiNodes)o.push(s);for(var r in e.prop.$multiLines)i.push(r);e.batchDelete(o,i),e._wallAllMulti()}break;case 67:if(t.ctrlKey){if(!e.prop.$nodes[e.prop.$focus])return;e.copyNode(e.prop.$focus)}break;case 86:if(t.ctrlKey){if(!e.prop.$clipNode||null==e.prop.$clipNode)return;e.parseNode()}}})},_initExpendFunc:function(){var e=this,t=this.prop.$workExtendStep,o=this.$refs.$workArea,i=this.$refs.$workArea.parentNode;this.$refs.$extendRight.addEventListener("click",function(s){o.style.width=o.offsetWidth+t+"px",e.$refs.$alignV&&(e.$refs.$alignV.style.width=o.style.width),i.scrollLeft=i.scrollWidth,i.style.overflow="scroll",b.stopEventPop(s)}),this.$refs.$extendBottom.addEventListener("click",function(s){o.style.height=o.offsetHeight+t+"px",e.$refs.$alignH&&(e.$refs.$alignH.style.height=o.style.height),i.scrollTop=i.scrollHeight,i.style.overflow="scroll",b.stopEventPop(s)})},_renderClick:function(e){e||(e=window.event);var t=this.prop.$nowType;if("cursor"!==t){if("direct"!==t&&"segment"!==t&&"dirDashed"!==t&&"segDashed"!==t&&"group"!==t&&"memo"!==t&&this.prop.$editable&&!this.prop.$dragAddOper){var o=b.getCoor(e,this.$refs.$workArea);this.addNode((new Date).getTime(),{name:this.prop.$nodePrefix+this.prop.$max,left:o.X/this.scale,top:o.Y/this.scale,type:this.prop.$nowType}),this.prop.$max++}}else{var i=e.target,s=i.tagName.toUpperCase();if("SVG"===s||"DIV"===s&&i.className.indexOf("GooFlow_work")>-1||"LABEL"===s)if(this.$refs.$lineOper&&this.$refs.$lineOper.getTid())this.focusItem(this.$refs.$lineOper.getTid(),!1);else if(this.extFlag.multi){var r=$()(this.prop.$multiNodes),n=$()(this.prop.$multiLines);0===r.length&&1===n.length?(delete this.prop.$multiLines[n],this.focusItem(n[0],!0)):1===r.length&&0===n.length?(delete this.prop.$multiNodes[r],this.focusItem(r[0],!0)):0===r.length&&0===n.length&&this.blurItem()}else this.inMulti&&this.prop.$editable||this.blurItem()}},_renderRightClick:function(e){"SVG"===e.target.tagName.toUpperCase()&&(this.blurItem(),b.preventDefault(e))},_bindScrollScaleEvent:function(){var e=this,t=function(t){var o=0;if((t=t||window.event).wheelDelta&&t.ctrlKey)o=-1*t.wheelDelta;else{if(!t.detail||!t.ctrlKey)return;o=t.detail}window.event?window.event.returnValue=!1:t.preventDefault();var i=o>0?-.1:o<0?.1:0;e.resetScale(e.scale+i)};document.addEventListener&&this.$el.addEventListener("DOMMouseScroll",t,!1),this.$el.onmousewheel=t}}},C=o("mvHQ"),S=o.n(C),N={methods:{bindHeadBtnEvent:function(e){this.opts.haveHead&&g()(this.prop.$headBtnEvents,e)},bindOperEvent:function(e){if("object"===(void 0===e?"undefined":u()(e)))for(var t in e)"function"==typeof e[t]&&(this[t]=e[t])},switchToolBtn:function(e){this.prop.$nowType!==e&&(this.prop.$dragAddOper&&"cursor"!==e&&!b.isDrawingLine(e)&&"group"!==e&&"memo"!==e||(this.prop.$nowType=e,this.$set(this.prop,"$nowType",e),"cursor"!==e&&this.blurItem()))},setDragAddOper:function(e){this.prop.$dragAddOper=e||!1},setNodeCustoms:function(e){g()(this.prop.$nodeCustoms,e)},setTitle:function(e){this.$set(this.prop,"$title",e)},addNode:function(e,t,o,i,s,r){!1!==o&&"function"==typeof this.onItemAdd&&!1===this.onItemAdd(e,"node",t)||(e=t.id||e,delete t.id,"function"==typeof this.pushOper&&this.prop.$editable&&!i&&this.pushOper("delNode",[e]),this.prop.$nodes[e]=t,r||this.$set(this.prop.$nodes,e,t),++this.prop.$nodeCount,this.prop.$editable&&(this.prop.$nodes[e].alt=!0,this.prop.$deletedItem[e]&&delete this.prop.$deletedItem[e]),!s&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()}))},moveNode:function(e,t,o,i,s,r){if(this.prop.$nodes[e]&&(!1===i||"function"!=typeof this.onItemMove||!1!==this.onItemMove(e,"node",t,o))){if("function"==typeof this.pushOper&&this.prop.$editable&&!s){var n=[e,this.prop.$nodes[e].left,this.prop.$nodes[e].top];this.pushOper("moveNode",n)}t<0&&(t=0),o<0&&(o=0),this.prop.$nodes[e].left=t,this.prop.$nodes[e].top=o,this._resetLines(e);var a=document.getElementById(e);a.style.left=t*this.scale+"px",a.style.top=o*this.scale+"px",this.prop.$editable&&(this.prop.$nodes[e].alt=!0,this._node2Area(e)),!r&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},resizeNode:function(e,t,o){if(this.prop.$nodes[e]&&("function"!=typeof this.onItemResize||!1!==this.onItemResize(e,"node",t,o))){var i=this.prop.$nodes[e].type,s=this.prop.$nodeTypeMap[i]||i;if(!(s.indexOf(" round")>0||s.indexOf(" rhomb")>0||this.prop.$nodeCustoms[i])){if("function"==typeof this.pushOper){var r=[e,this.prop.$nodes[e].width,this.prop.$nodes[e].height];this.pushOper("resizeNode",r)}var n=this.prop.$nodes[e],a=document.getElementById(e);a.childNodes[0].style.width=t*this.scale-2+"px",a.childNodes[0].style.height=o*this.scale-2+"px",n.width=a.offsetWidth/this.scale,n.height=a.offsetHeight/this.scale,a.childNodes[0].style.height=n.height*this.scale-2+"px",this.$editable&&(n.alt=!0),this.$set(this.prop.$nodes[e],n),this._resetLines(e),this._node2Area(e),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}}},copyNode:function(e){this.prop.$clipNode=this.getItemInfo(e,"node")},parseNode:function(){this.prop.$clipNode&&null!=this.prop.$clipNode&&(this.prop.$clipNode.top+=30,this.prop.$clipNode.left+=30,this.addNode((new Date).getTime(),JSON.parse(S()(this.prop.$clipNode))))},delNode:function(e,t,o,i){if(this.prop.$nodes[e]&&(!1===t||"function"!=typeof this.onItemDel||!1!==this.onItemDel(e,"node"))){for(var s in this.prop.$lines)this.prop.$lines[s].from!==e&&this.prop.$lines[s].to!==e||this.delLine(s,!0);if("function"==typeof this.pushOper&&!o){var r=[e,this.prop.$nodes[e]];this.pushOper("addNode",r)}this.$delete(this.prop.$nodes,e),--this.prop.$nodeCount,this.prop.$focus===e&&(this.prop.$focus=""),this.prop.$editable&&(this.prop.$deletedItem[e]="node"),!i&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},addLine:function(e,t,o,i,s,r){if(t.from!==t.to){var n=this.prop.$nodes[t.from],a=this.prop.$nodes[t.to];n&&a&&(!1!==o&&"function"==typeof this.onItemAdd&&!1===this.onItemAdd(e,"line",t)||(e=t.id||e,delete t.id,"function"==typeof this.pushOper&&this.prop.$editable&&!i&&this.pushOper("delLine",[e]),t.M||(t.M=""),(!t.type||"lr"!==t.type&&"tb"!==t.type)&&(t.type="sl"),t.marked||(t.marked=!1),r?this.prop.$lines[e]=t:this.$set(this.prop.$lines,e,t),++this.prop.$lineCount,this.prop.$editable&&(this.prop.$lines[e].alt=!0,this.prop.$deletedItem[e]&&delete this.prop.$deletedItem[e]),!s&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})))}},setLineM:function(e,t,o,i,s){this._setPolyCoor(e,t,"M",o,i,s)},setLineMl:function(e,t,o,i,s){this._setPolyCoor(e,t,"Ml",o,i,s)},setLineMr:function(e,t,o,i,s){this._setPolyCoor(e,t,"Mr",o,i,s)},setLineStyle:function(e,t){var o="direct",i=this.prop.$lines[e];if(!i)return!1;if(i.dash&&(o="dirDashed"),i.noArrow&&(o=i.dash?"segDashed":"segment"),!t||t===o||"direct"!==t&&"dirDashed"!==t&&"segment"!==t&&"segDashed"!==t)return!1;if("function"!=typeof this.onLineSetStyle||!1!==this.onLineSetStyle(e,t)){switch(t){case"direct":i.dash=!1,i.noArrow=!1;break;case"dirDashed":i.dash=!0,i.noArrow=!1;break;case"segment":i.dash=!1,i.noArrow=!0;break;case"segDashed":i.dash=!0,i.noArrow=!0;break;default:return}var s=document.getElementById(e).querySelectorAll("path")[1];if(i.dash?s.setAttribute("style","stroke-dasharray:5,6"):s.removeAttribute("style"),i.noArrow?s.removeAttribute("marker-end"):i.marked?s.setAttribute("marker-end","url(#arrow2)"):s.setAttribute("marker-end","url(#arrow1)"),this.$undoStack){var r=[e,o];this.pushOper("setLineStyle",r)}if(this.prop.$editable&&(i.alt=!0),this.prop.$focus===e){var n=this;this.$nextTick(function(){n.focusItem(e)})}this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},setLineType:function(e,t,o){var i=this.prop.$lines[e];if(!t||null==t||""===t||!i||t===i.type)return!1;if("function"!=typeof this.onLineSetType||!1!==this.onLineSetType(e,t)){if("function"==typeof this.pushOper){var s=[e,i.type||"sl",i.M];this.pushOper("setLineType",s)}var r=i.from,n=i.to,a=this.prop.$nodes[r],l=this.prop.$nodes[n];if(i.type=t,this.prop.$editable&&(i.alt=!0),"sl"!==t?(o||(o=b.getMValue(a,l,t)),"lr"===t?(i.Ml=a.top+a.height/2,i.Mr=l.top+l.height/2):(i.Ml=a.left+a.width/2,i.Mr=l.left+l.width/2),this.setLineM(e,o,!0,!1)):(i.M="",i.Ml="",i.Mr="",this.$set(this.prop.$lines[e],i),this.$refs.$lineMove.hide(),this.$refs.$lineMoveL.hide(),this.$refs.$lineMoveR.hide()),this.prop.$focus===e){var h=this;this.$nextTick(function(){h.focusItem(e)})}this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},moveLinePoints:function(e,t,o,i){if(t!==o&&e&&this.prop.$lines[e]){for(var s in null!=t&&""!==t||(t=this.prop.$lines[e].from),null!=o&&""!==o||(o=this.prop.$lines[e].to),this.prop.$lines)if(t===this.prop.$lines[s].from&&o===this.prop.$lines[s].to)return;if("function"!=typeof this.onLinePointMove||!1!==this.onLinePointMove(e,t,o)){if("function"==typeof this.pushOper&&!i){var r=[e,this.prop.$lines[e].from,this.prop.$lines[e].to];this.pushOper("moveLinePoints",r)}var n=this.prop.$lines[e];null!=t&&""!==t&&(n.from=t),null!=o&&""!==o&&(n.to=o),this.prop.$editable&&(n.alt=!0),this.$set(this.prop.$lines[e],n),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}}},delLine:function(e,t,o,i){if(this.prop.$lines[e]&&(!1===t||"function"!=typeof this.onItemDel||!1!==this.onItemDel(e,"line"))){if("function"==typeof this.pushOper&&!o){var s=[e,this.prop.$lines[e]];this.pushOper("addLine",s)}this.$delete(this.prop.$lines,e),--this.prop.$lineCount,this.prop.$editable&&(this.prop.$deletedItem[e]="line",this.prop.$focus===e&&(this.$refs.$mpFrom.hide(),this.$refs.$mpTo.hide(),this.$refs.$lineMove.hide(),this.$refs.$lineMoveL.hide(),this.$refs.$lineMoveR.hide(),this.$refs.$lineOper&&this.$refs.$lineOper.hide())),this.prop.$focus===e&&(this.prop.$focus=""),!i&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},blurItem:function(e){if(""!==this.prop.$focus){var t=this.prop.$focus;if("DIV"===document.getElementById(t).tagName.toUpperCase()){if(delete this.prop.$clipNode,!e&&"function"==typeof this.onItemBlur&&!1===this.onItemBlur(this.prop.$focus,"node"))return!1}else{if(!e&&"function"==typeof this.onItemBlur&&!1===this.onItemBlur(this.prop.$focus,"line"))return!1;this.prop.$editable&&(this.$refs.$lineMove.hide(),this.$refs.$lineMoveL.hide(),this.$refs.$lineMoveR.hide(),this.$refs.$lineOper.hide(),this.$refs.$mpFrom.hide(),this.$refs.$mpTo.hide())}}else this.prop.$editable&&this.prop.$multiNodes&&this._clearMultiList();return this.prop.$focus="",!0},focusItem:function(e,t){if(e&&null!=e&&""!==e){var o=document.getElementById(e);if(null!=o&&this.blurItem(!t)){if("DIV"===o.tagName.toUpperCase()){if(t&&"function"==typeof this.onItemFocus&&!1===this.onItemFocus(e,"node"))return;this.prop.$focus=e}else{if(t&&"function"==typeof this.onItemFocus&&!1===this.onItemFocus(e,"line"))return;if(this.prop.$focus=e,!this.prop.$editable)return;var i=this.prop.$lines[e],s=o.getAttribute("from").split(","),r=o.getAttribute("to").split(",");s[0]=parseInt(s[0],10),s[1]=parseInt(s[1],10),r[0]=parseInt(r[0],10),r[1]=parseInt(r[1],10);var n=[s[0],s[1],r[0],r[1]];"lr"===i.type?(this.$refs.$lineMove.show({width:"5px",height:Math.abs(i.Ml-i.Mr)*this.scale+"px",left:i.M*this.scale-3+"px",top:(i.Mr>i.Ml?i.Ml:i.Mr)*this.scale+1+"px",cursor:"e-resize",display:"block"}),this.$refs.$lineMove.setData({type:"lr",tid:e}),this.$refs.$lineMoveL.show({height:"5px",width:Math.abs(s[0]-i.M)*this.scale+"px",top:i.Ml*this.scale-3+"px",left:(i.M>s[0]?s[0]:i.M)*this.scale+1+"px",cursor:"s-resize",display:"block"}),this.$refs.$lineMoveL.setData({type:"lr",tid:e}),this.$refs.$lineMoveR.show({height:"5px",width:Math.abs(r[0]-i.M)*this.scale+"px",top:i.Mr*this.scale-3+"px",left:(i.M>r[0]?r[0]:i.M)*this.scale+1+"px",cursor:"s-resize",display:"block"}),this.$refs.$lineMoveR.setData({type:"lr",tid:e}),s[0]=i.M*this.scale,r[0]=s[0]):"tb"===i.type?(this.$refs.$lineMove.show({width:Math.abs(i.Ml-i.Mr)*this.scale+"px",height:"5px",left:(i.Mr>i.Ml?i.Ml:i.Mr)+1+"px",top:i.M*this.scale-3+"px",cursor:"s-resize",display:"block"}),this.$refs.$lineMove.setData({type:"tb",tid:e}),this.$refs.$lineMoveL.show({height:Math.abs(s[1]-i.M)*this.scale+"px",width:"5px",top:(i.M>s[1]?s[1]:i.M)+1+"px",left:i.Ml*this.scale-3+"px",cursor:"e-resize",display:"block"}),this.$refs.$lineMoveL.setData({type:"tb",tid:e}),this.$refs.$lineMoveR.show({height:Math.abs(r[1]-i.M)*this.scale+"px",width:"5px",top:(i.M>r[1]?r[1]:i.M)+1+"px",left:i.Mr*this.scale-3+"px",cursor:"e-resize",display:"block"}),this.$refs.$lineMoveR.setData({type:"tb",tid:e}),s[1]=i.M*this.scale,r[1]=s[1]):(this.$refs.$lineMove.hide(),this.$refs.$lineMove.setData({}),this.$refs.$lineMoveL.hide(),this.$refs.$lineMoveL.setData({}),this.$refs.$lineMoveR.hide(),this.$refs.$lineMoveR.setData({}));var a=(s[0]+r[0])/2-40,l=(s[1]+r[1])/2+4,h=this.$refs.$lineOper;h.show({display:"block",left:a+"px",top:l+"px"}),h.setTid(e),(h=this.$refs.$mpFrom).show({left:n[0]-4+"px",top:n[1]-4+"px"}),h.setP(n[0]+","+n[1]),(h=this.$refs.$mpTo).show({left:n[2]-4+"px",top:n[3]-4+"px"}),h.setP(n[2]+","+n[3])}this.switchToolBtn("cursor")}}},setItemExtra:function(e,t,o){if(null!=e&&""!==e&&null!=t&&""!==t){var i="node"===t?this.prop.$nodes[e]:"line"===t?this.prop.$lines[e]:"area"===t?this.prop.$areas[e]:this.prop.$memos[e];for(var s in o)i[s]=o[s]}},delItemExtra:function(e,t,o){if(null!=e&&""!==e&&null!=t&&""!==t)for(var i="node"===t?this.prop.$nodes[e]:"line"===t?this.prop.$lines[e]:"area"===t?this.prop.$areas[e]:this.prop.$memos[e],s=0;s<o.length;++s)delete i[o[s]]},getItemInfo:function(e,t){switch(t){case"node":return JSON.parse(S()(this.prop.$nodes[e]||null));case"line":return JSON.parse(S()(this.prop.$lines[e]||null));case"area":return JSON.parse(S()(this.prop.$areas[e]||null));case"memo":return JSON.parse(S()(this.prop.$memos[e]||null));default:return JSON.parse(S()(this.prop.$nodes[e]||this.prop.$lines[e]||this.prop.$areas[e]||this.prop.$memos[e]||null))}},markItem:function(e,t,o,i,s,r){if("node"===t){if(!this.prop.$nodes[e])return;if(!1!==i&&"function"==typeof this.onItemMark&&!1===this.onItemMark(e,"node",o))return;this.$set(this.prop.$nodes[e],"marked",o||!1)}else{if("line"!==t)return;if(!this.prop.$lines[e])return;if(!1!==i&&"function"==typeof this.onItemMark&&!1===this.onItemMark(e,"line",o))return;this.$set(this.prop.$lines[e],"marked",o||!1)}if("function"==typeof this.pushOper&&!s){var n=[e,t,!o];this.pushOper("markItem",n)}!r&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})},setItemColor:function(e,t,o,i,s){if(null!=e&&""!==e&&null!=t&&""!==t){var r="";if("node"===t)r=document.getElementById(e).style.backgroundColor,this.$set(this.prop.$nodes[e],"color",o);else{if("line"!==t)return;r=this.prop.$lines[e].color,this.$set(this.prop.$lines[e],"color",o)}"function"!=typeof this.pushOper||i||this.pushOper("setItemColor",[e,t,r]),!s&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},setItemFontColor:function(e,t,o,i){if(null!=e&&""!==e&&null!=t&&""!==t){var s="";if("node"===t){var r=this.prop.$nodes[e],n=this.prop.$nodeTypeMap[r.type]||r.type;s=r.fontColor||(n.indexOf(" mix")>-1?this.GooFlow.color.mixFont:this.GooFlow.color.font),this.$set(this.prop.$nodes[e],"fontColor",o)}else{if("line"!==t)return;s=this.prop.$lines[e].fontColor||this.GooFlow.color.lineFont,this.$set(this.prop.$lines[e],"fontColor",o)}"function"!=typeof this.pushOper||i||this.pushOper("setItemFontColor",[e,t,s])}},setName:function(e,t,o,i){var s="";if("node"===o){if(!this.prop.$nodes[e])return;if(this.prop.$nodes[e].name===t)return;if("function"==typeof this.onItemRename&&!1===this.onItemRename(e,t,"node"))return;var r=this.prop.$nodes[e];s=r.name;var n=!1,a=document.getElementById(e),l=this.prop.$nodeTypeMap[r.type]||r.type;if(l.indexOf(" round")<0&&l.indexOf(" rhomb")<0&&!this.prop.$nodeCustoms[r.type]){a.querySelector("td div").innerText=t;var h=a.offsetWidth/this.scale,p=a.offsetHeight/this.scale;r.width===h&&r.height===p||(this.resizeNode(e,h,p),n=!0)}else a.querySelector(".span").innerText=t;r.name=t,this.prop.$editable&&(r.alt=!0),n&&this._resetLines(e),!i&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}else if("line"===o){if(!this.prop.$lines[e])return;if(this.prop.$lines[e].name===t)return;if("function"==typeof this.onItemRename&&!1===this.onItemRename(e,t,"line"))return;var d=this.prop.$lines[e];s=d.name,d.name=t,this.prop.$editable&&(d.alt=!0),this.$set(this.prop.$lines,e,d)}else{if("area"!==o)return;if(!this.prop.$areas[e])return;if(this.prop.$areas[e].name===t)return;if("function"==typeof this.onItemRename&&!1===this.onItemRename(e,t,"area"))return;var c=this.prop.$areas[e];s=c.name,c.name=t,this.$editable&&(c.alt=!0),document.getElementById(e).querySelector("label").innerHTML=t}"function"==typeof this.pushOper&&this.pushOper("setName",[e,s,o])},setExtra:function(e){if("object"===(void 0===e?"undefined":u()(e)))for(var t in e)this.prop.$extra[t]=e[t]},getExtra:function(){return this.prop.$extra},loadData:function(e){for(var t in this.clearData(!0),e.title&&null!=e.title&&""!==e.title.trim()||(e.title=this.prop.$title),this.prop.$deletedItem={},this.prop.$extra=e.extra&&null!=e.extra?e.extra:{},this.prop.$max=void 0===e.initNum?1:e.initNum,e.nodes)this.addNode(t,e.nodes[t],!1,!0,!0,!0);for(var o in e.lines)this.addLine(o,e.lines[o],!1,!0,!0,!0);if(this.extFlag.group&&e.areas)for(var i in e.areas)this.addArea(i,e.areas[i],!1,!0,!0,!0);if(this.extFlag.memo&&e.memos)for(var s in e.memos)this.addMemo(s,e.memos[s],!1,!0,!0,!0);var r=this._buildWorkSize();this.$refs.$workArea.style.width=r.width+"px",this.$refs.$workArea.style.height=r.height+"px",this.$refs.$alignV&&(this.$refs.$alignV.style.width=r.width+"px"),this.$refs.$alignH&&(this.$refs.$alignH.style.height=r.height+"px"),this.prop.$title="",this.setTitle(e.title),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})},exportData:function(){var e={title:this.prop.$title,nodes:{},lines:{}};for(var t in e.initNum=this.prop.$max,this.prop.$nodes)e.nodes[t]=JSON.parse(S()(this.prop.$nodes[t])),e.nodes[t].marked||delete e.nodes[t].marked;for(var o in this.prop.$lines)e.lines[o]=JSON.parse(S()(this.prop.$lines[o])),e.lines[o].marked||delete e.lines[o].marked,""===e.lines[o].M&&delete e.lines[o].M;if(this.extFlag.group)for(var i in e.areas={},this.prop.$areas)e.areas[i]=JSON.parse(S()(this.prop.$areas[i]));if(this.extFlag.memo)for(var s in e.memos={},this.prop.$memos)e.memos[s]=JSON.parse(S()(this.prop.$memos[s]));for(var r in e.extra={},this.prop.$extra)e.extra[r]=JSON.parse(S()(this.prop.$extra[r]));return e},exportAlter:function(){var e={nodes:{},lines:{}};for(var t in this.prop.$nodes)this.prop.$nodes[t].alt&&(e.nodes[t]=this.prop.$nodes[t]);for(var o in this.prop.$lines)this.prop.$lines[o].alt&&(e.lines[o]=this.prop.$lines[o]);if(this.extFlag.group)for(var i in e.areas={},this.prop.$areas)this.prop.$areas[i].alt&&(e.areas[i]=this.prop.$areas[i]);if(this.extFlag.memo)for(var s in e.memos={},this.prop.$memos)this.prop.$memos[s].alt&&(e.memos[s]=this.prop.$memos[s]);return e.deletedItem=this.prop.$deletedItem,e},transNewId:function(e,t,o){var i=null,s=null;switch(o){case"node":s=this.prop.$nodes;break;case"line":s=this.prop.$lines;break;case"area":s=this.prop.$areas;break;case"memo":s=this.prop.$memos}if(null!=s&&s[e]&&(i=JSON.parse(S()(this.prop.$areas[e])),delete s[e],this.$set(this.prop["$"+o+"s"],t,i),"area"===o))for(var r in this.prop.$nodes)(i=this.prop.$nodes[r]).areaId===e&&(this.prop.$nodes[r].areaId=t);if(e!==this.prop.$focus||"node"!==o&&"line"!==o||this.$set(this.prop.$focus,t),"function"==typeof this.pushOper&&null!=s){var n=[t,e,o];this.pushOper("transNewId",n)}},clearData:function(e){if(this.extFlag.group){for(var t in this.prop.$areas)delete this.prop.$areas[t];this.prop.$areaCount=0}if(this.extFlag.memo){for(var o in this.prop.$memos)delete this.prop.$memos[o];this.prop.$memoCount=0}for(var i in this.prop.$extra)delete this.prop.$extra[i];for(var s in this.prop.$max=1,this.prop.$deletedItem)delete this.prop.$deletedItem[s];for(var r in this.prop.$focus="",this.prop.$lines)delete this.prop.$lines[r];for(var n in this.prop.$lineCount=0,this.prop.$nodes)delete this.prop.$nodes[n];this.prop.$nodeCount=0,e||this.$set(this.prop,"$nodes",{}),"function"==typeof this.pushOper&&(this.prop.$undoStack.splice(0,this.prop.$undoStack.length),this.prop.$redoStack.splice(0,this.prop.$redoStack.length)),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})},reinitSize:function(e,t){var o=e||this.$el.clientWidth,i=t||this.$el.clientHeight;this.$el.style.width=o+"px",this.$el.style.height=i+"px",this.opts.width=o,this.opts.height=i;var s=0,r=8;this.opts.haveHead&&(s=26,r=7),this.opts.haveTool&&(this.$refs.$tool.$el.style.height=i-s-r+"px",o-=31),o-=9,i=i-s-(this.opts.haveHead?5:8),this.$refs.$workArea.offsetWidth>o&&(o=this.$refs.$workArea.offsetWidth),this.$refs.$workArea.offsetHeight>i&&(i=this.$refs.$workArea.offsetHeight),this.$refs.$workArea.style.width=o+"px",this.$refs.$workArea.style.height=i+"px",this.$refs.$alignV&&(this.$refs.$alignV.style.width=o+"px"),this.$refs.$alignH&&(this.$refs.$alignH.style.height=i+"px"),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})},resetScale:function(e){if(e?e<.5?e=.5:e>4&&(e=4):e=1,this.scale!==e){this.scale=e;var t=0,o=0;this.blurItem();var i=this._suitSize();t=i.width+this.prop.$workExtendStep,o=i.height+this.prop.$workExtendStep,t<this.$refs.$workArea.parentNode.clientWidth&&(t=this.$refs.$workArea.parentNode.clientWidth),o<this.$refs.$workArea.parentNode.clientHeight&&(o=this.$refs.$workArea.parentNode.clientHeight),this.$refs.$workArea.style.width=t+"px",this.$refs.$workArea.style.height=o+"px",this.$refs.$alignV&&(this.$refs.$alignV.style.width=t+"px"),this.$refs.$alignH&&(this.$refs.$alignH.style.height=o+"px"),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()}),void 0===this._tmpScaleValue&&(this._tmpScaleValue=document.createElement("div"),this._tmpScaleValue.id=this.prop.$id+"_scaleValue",this._tmpScaleValue.style.cssText="width:360px;height:120px;line-height:100%;position:absolute;display:block;margin:-60px 0 0 -"+(180-(this.opts.haveTool?0:this.$refs.$tool.$el.offsetWidth))+"px;top:50%;left:50%;text-align:center;font-weight:bold;color:rgba(0,0,0,.1);font-size:120px !important;",this.$el.appendChild(this._tmpScaleValue)),this._tmpScaleValue.innerText=Math.round(1e4*this.scale)/100+"%",this._tmpTimeout&&(clearTimeout(this._tmpTimeout),delete this._tmpTimeout),this._tmpScaleValue.style.display="block";var s=this;this._tmpTimeout=setTimeout(function(){s._tmpScaleValue.style.display="none"},600)}},extend:function(e){for(var t in e)this[t]=e[t]}}},I={name:"head-bar",template:'\n  <div class="GooFlow_head" :style="\'border-bottom-color:\'+global.color.main"  @click="handleBtnClick">\n    <label v-if="opts.headLabel" :style="\'background-color:\'+global.color.main" :title="title">{{title}}</label>\n    <template v-for="(item) in opts.headBtns">\n      <li v-if="item!=\'undo\'&&item!=\'redo\'" class="GooFlow_head_btn" :title="global.remarks.headBtns[item]||\'\'" :key="bgId+\'_\'+item"><i :class="\'ico_\'+item"></i></li>\n      <li v-else-if="item==\'undo\'" :class="undoClass" :title="global.remarks.headBtns[\'undo\']||\'\'" :key="bgId+\'_undo\'"><i class="ico_undo"></i></li>\n      <li v-else-if="item==\'redo\'" :class="redoClass" :title="global.remarks.headBtns[\'redo\']||\'\'" :key="bgId+\'_redo\'"><i class="ico_redo"></i></li>\n    </template>\n    <slot name="custom"></slot>\n  </div>\n  ',props:["bgId","global","opts","title","undoStack","redoStack"],computed:{undoClass:function(){return 0===this.undoStack.length?"GooFlow_head_btn a_disabled":"GooFlow_head_btn"},redoClass:function(){return 0===this.redoStack.length?"GooFlow_head_btn a_disabled":"GooFlow_head_btn"}},methods:{handleBtnClick:function(e){e||(e=window.event);var t=e.target,o=t.tagName.toUpperCase();"LI"===o&&t.className.indexOf("GooFlow_head_btn")>-1&&(t=t.childNodes[0],o="I"),"I"===o&&t.parentNode.className.indexOf("GooFlow_head_btn")>-1&&(t.parentNode.className.includes(" a_disabled")||this.$emit("btnClick",t.className)),window.event?e.cancelBubble=!0:e.stopPropagation()}}},A={name:"tool-bar",template:'\n  <ul class="GooFlow_tool" :style="{width:btnWidth+\'px\',top:(opts.haveHead? 28:3)+\'px\'}" @click="setNowType">\n    <div style="margin-bottom:4px"><span/><span/><span/></div>\n    <li type="cursor" :title="global.remarks.toolBtns[\'cursor\']||\'\'" :class="btnCss(\'cursor\')" :id="bgId+\'_btn_cursor\'">\n      <i class="ico_cursor"/>\n      <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[\'cursor\'] }}</em>\n    </li>\n    \x3c!--实线--\x3e\n    <div v-if="haveDirect&&haveDirDashed" style="position:relative;">\n      <li :title="global.remarks.toolBtns[line1]||\'\'" :class="btnCss(line1)" :type="line1" :id="bgId+\'_btn_\'+line1">\n        <i :class="\'ico_\'+line1"></i>\n        <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[line1] }}</em>\n        <div><div class="rs_rb"></div></div>\n      </li>\n      <ul submenu="1" :style="{width:btnWidth+\'px\'}">\n        <li :title="global.remarks.toolBtns[\'direct\']||\'\'" :class="btnLiCss(\'direct\',line1)" type="direct">\n          <i class="ico_direct"/>\n          <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[\'direct\'] }}</em>\n        </li>\n        <li :title="global.remarks.toolBtns[\'dirDashed\']||\'\'" :class="btnLiCss(\'dirDashed\',line1)" type="dirDashed">\n          <i class="ico_dirDashed"/>\n          <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[\'dirDashed\'] }}</em>\n        </li>\n      </ul>\n    </div>\n    <li v-else-if="haveDirect" :title="global.remarks.toolBtns[\'direct\']||\'\'" type="direct" :class="btnCss(\'direct\')" :id="bgId+\'_btn_direct\'">\n      <i class="ico_direct"/>\n      <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[\'direct\'] }}</em>\n    </li>\n    <li v-else-if="haveDirDashed" :title="global.remarks.toolBtns[\'dirDashed\']||\'\'" type="dirDashed" :class="btnCss(\'dirDashed\')" :id="bgId+\'_btn_dirDashed\'">\n      <i class="ico_dirDashed"/>\n      <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[\'dirDashed\'] }}</em>\n    </li>\n    \x3c!--虚线--\x3e\n    <div v-if="haveSegment&&haveSegDashed" style="position:relative;">\n      <li :title="global.remarks.toolBtns[line2]||\'\'" :class="btnCss(line2)" :type="line2" :id="bgId+\'_btn_\'+line2">\n        <i :class="\'ico_\'+line2"/>\n        <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[line2] }}</em>\n        <div><div class="rs_rb"></div></div>\n      </li>\n      <ul submenu="1" :style="{width:btnWidth+\'px\'}">\n        <li :title="global.remarks.toolBtns[\'segment\']||\'\'" :class="btnLiCss(\'segment\',line2)" type="segment">\n          <i class="ico_segment"/>\n          <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[\'segment\'] }}</em>\n        </li>\n        <li :title="global.remarks.toolBtns[\'segDashed\']||\'\'" :class="btnLiCss(\'segDashed\',line2)" type="segDashed">\n          <i class="ico_segDashed"/>\n          <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[\'segDashed\'] }}</em>\n        </li>\n      </ul>\n    </div>\n    <li v-else-if="haveSegment" :title="global.remarks.toolBtns[\'segment\']||\'\'" type="segment" :class="btnCss(\'segment\')" :id="bgId+\'_btn_segment\'">\n      <i class="ico_segment"/>\n      <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[\'segment\'] }}</em>\n    </li>\n    <li v-else-if="haveSegDashed" :title="global.remarks.toolBtns[\'segDashed\']||\'\'" type="segDashed" :class="btnCss(\'segDashed\')" :id="bgId+\'_btn_segDashed\'">\n      <i class="ico_segDashed"/>\n      <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[\'segDashed\'] }}</em>\n    </li>\n    \x3c!--加入自定义按钮--\x3e\n    <span/>\n    <li v-for="(item,index) in opts.toolBtns" :type="item.split(\' \')[0]" :class="btnCss(item.split(\' \')[0])" :key="bgId+\'_\'+item.split(\' \')[0]"\n      :title="global.remarks.toolBtns[item.split(\' \')[0]]">\n      <i :class="\'ico_\'+item.split(\' \')[0]"/>\n      <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[item.split(\' \')[0]] }}</em>\n    </li>\n    \x3c!--泳道--\x3e\n    <template v-if="extFlag.group">\n      <span/>\n      <li type="group" :class="btnCss(\'group\')" :id="bgId+\'_btn_group\'" :title="global.remarks.toolBtns[\'group\']||\'\'">\n        <i class="ico_group"/>\n        <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[\'group\'] }}</em>\n      </li>\n    </template>\n    \x3c!--便笺--\x3e\n    <template v-if="extFlag.memo">\n      <span/>\n      <li type="memo" :class="btnCss(\'memo\')" :id="bgId+\'_btn_memo\'" :title="global.remarks.toolBtns[\'memo\']||\'\'">\n        <i class="ico_memo"/>\n        <em v-if="textWidth>0" :style="{width:textWidth+\'px\'}">{{ global.remarks.toolBtns[\'memo\'] }}</em>\n      </li>\n    </template>\n  </ul>\n  ',props:["bgId","global","opts","extFlag","nowType"],data:function(){return{textWidth:0,btnWidth:35,select:"cursor",line1:"direct",line2:"segment",haveDirect:!0,haveDirDashed:!1,haveSegment:!1,haveSegDashed:!1}},created:function(){this.opts.toolTextWidth&&this.opts.toolTextWidth>0&&(this.textWidth=this.opts.toolTextWidth),"string"==typeof this.textWidth&&(this.textWidth=parseInt(this.textWidth,10)),this.btnWidth+=this.textWidth,!1===this.opts.haveDirect&&(this.haveDirect=!1),this.haveDirDashed=this.opts.haveDirDashed||!1,this.haveSegment=this.opts.haveSegment||!1,this.haveSegDashed=this.opts.haveSegDashed||!1},watch:{nowType:function(e,t){switch(e){case"cursor":case"multi":this.select=e;break;case"direct":case"dirDashed":this.line1=e;break;case"segment":case"segDashed":this.line2=e}}},methods:{btnCss:function(e){return e===this.nowType?"GooFlow_tool_btndown":"GooFlow_tool_btn"},btnLiCss:function(e,t){return e===t?"GooFlow_tool_btndown":"GooFlow_tool_btn"},setNowType:function(e){var t=e.target,o=t.tagName.toUpperCase();if("I"===o||"EM"===o)t=t.parentNode;else if("LI"!==o)return!1;var i=t.getAttribute("type");i!==this.nowType&&this.$emit("updateType",i)}}},T={name:"line-move",template:'<div class="GooFlow_linemove" style="top:0;left:0;width:0;height:0;cursor:s-resize;background-color:transparent" @mousedown="operMouseDown($event)" :type="M"></div>',props:["M"],methods:{setData:function(e){this.type=e.type||0,this.tid=e.tid||0},getData:function(){return this.type||(this.type=0),this.tid||(this.tid=0),{type:this.type,tid:this.tid}},hide:function(){this.setData(0),this.$el.style.display="none"},show:function(e){for(var t in e)this.$el.style[t]=e[t];this.$el.style.display="block"},position:function(){return{top:this.$el.offsetTop,left:this.$el.offsetLeft}},operMouseDown:function(e){var t=this.$parent,o=this,i=this.$parent.$refs.$workArea;if(2===e.button)return b.stopEventPop(e),!1;var s=b.mouseP(e),r=b.elCsys(i),n=s.x-r.left+i.parentNode.scrollLeft,a=s.y-r.top+i.parentNode.scrollTop,l=this.position(),h=n-l.left,p=a-l.top,d=!1;this.$el.style.backgroundColor="#333",document.onmousemove=function(e){e||(e=window.event);var t=b.mouseP(e);n=t.x-r.left+i.parentNode.scrollLeft,a=t.y-r.top+i.parentNode.scrollTop;var s=o.getData();"lr"===s.type&&"M"===o.M||"tb"===s.type&&"M"!==o.M?((n-=h)<0?n=0:n>i.offsetWidth&&(n=i.offsetWidth),o.$el.style.left=n+"px"):("tb"===s.type&&"M"===o.M||"lr"===s.type&&"M"!==o.M)&&((a-=p)<0?a=0:a>i.offsetHeight&&(a=i.offsetHeight),o.$el.style.top=a+"px"),d=!0},document.onmouseup=function(){var e=o.getData();if(d){var i=o.position();if("lr"===e.type)switch(o.M){case"M":t.setLineM(e.tid,(i.left+3)/t.scale);break;case"Ml":t.setLineMl(e.tid,(i.top+3)/t.scale);break;case"Mr":t.setLineMr(e.tid,(i.top+3)/t.scale)}else if("tb"===e.type)switch(o.M){case"M":t.setLineM(e.tid,(i.top+3)/t.scale);break;case"Ml":t.setLineMl(e.tid,(i.left+3)/t.scale);break;case"Mr":t.setLineMr(e.tid,(i.left+3)/t.scale)}}o.$el.style.backgroundColor="transparent",t.prop.$focus===e.tid&&t.$nextTick(function(){t.focusItem(e.tid)}),document.onmousemove=null,document.onmouseup=null}}}},D={name:"line-mp",template:'<div class="GooFlow_line_mp" style="display:none;left:0;top:0" @mousedown="operMouseDown($event)"></div>',props:["type"],methods:{setP:function(e){this.p=e},getP:function(){return this.p||(this.p=0),this.p},hide:function(){this.setP(0),this.$el.style.display="none"},show:function(e){for(var t in e)this.$el.style[t]=e[t];this.$el.style.display="block"},operMouseDown:function(e){var t=this.$parent,o=this.type;t.switchToolBtn("cursor");var i=t.$refs.$mpFrom.getP().split(","),s=t.$refs.$mpTo.getP().split(",");this.$el.style.display="none","from"===o?t.lineEnd={x:s[0],y:s[1],id:t.prop.$lines[t.$refs.$lineOper.getTid()].to}:"to"===o&&(t.lineStart={x:i[0],y:i[1],id:t.prop.$lines[t.$refs.$lineOper.getTid()].from}),M.addClass(t.$refs.$workArea,"crosshair"),t.$refs.$workArea.style.cursor="crosshair !important";var r=t.$refs.$tmpLine.getState();return r.display="",r.d="M "+i[0]+" "+i[1]+" L "+s[0]+" "+s[1],r.noArrow="segment"===t.prop.$nowType||"segDashed"===t.prop.$nowType,r.dash="dirDashed"===t.prop.$nowType||"segDashed"===t.prop.$nowType,t.$refs.$tmpLine.setState(r),b.preventDefault(e),!1}}},F=function(e,t){var o={},i=o.lib={},s=i.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var o=new e;return t&&o.mixIn(t),o.$super=this,o},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),r=i.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!==t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,o=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var s=0;s<e;s++)t[i+s>>>2]|=(o[s>>>2]>>>24-s%4*8&255)<<24-(i+s)%4*8;else if(65535<o.length)for(s=0;s<e;s+=4)t[i+s>>>2]=o[s>>>2];else t.push.apply(t,o);return this.sigBytes+=e,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=e.ceil(o/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var o=[],i=0;i<t;i+=4)o.push(4294967296*e.random()|0);return r.create(o,t)}}),n=o.enc={},a=n.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var o=[],i=0;i<e;i++){var s=t[i>>>2]>>>24-i%4*8&255;o.push((s>>>4).toString(16)),o.push((15&s).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i+=2)o[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return r.create(o,t/2)}},l=n.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var o=[],i=0;i<e;i++)o.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return o.join("")},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i++)o[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return r.create(o,t)}},h=n.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},p=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=r.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var o=this._data,i=o.words,s=o.sigBytes,n=this.blockSize,a=s/(4*n);if(t=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*n,s=e.min(4*t,s),t){for(var l=0;l<t;l+=n)this._doProcessBlock(i,l);l=i.splice(0,t),o.sigBytes-=s}return r.create(l,s)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=p.extend({init:function(){this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=p.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,o){return e.create(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return d.HMAC.create(e,o).finalize(t)}}});var d=o.algo={};return o}(Math);h=(l=F).lib.WordArray,l.enc.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,i=this._map;e.clamp(),e=[];for(var s=0;s<o;s+=3)for(var r=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,n=0;4>n&&s+.75*n<o;n++)e.push(i.charAt(r>>>6*(3-n)&63));if((t=i.charAt(64))&&null!=t&&""!==t)for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=(e=e.replace(/\s/g,"")).length,o=this._map,i=o.charAt(64);i&&-1!==(i=e.indexOf(i))&&(t=i),i=[];for(var s=0,r=0;r<t;r++)if(r%4){var n=o.indexOf(e.charAt(r-1))<<r%4*2,a=o.indexOf(e.charAt(r))>>>6-r%4*2;i[s>>>2]|=(n|a)<<24-s%4*8,s++}return h.create(i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,o,i,s,r,n){return((e=e+(t&o|~t&i)+s+n)<<r|e>>>32-r)+t}function o(e,t,o,i,s,r,n){return((e=e+(t&i|o&~i)+s+n)<<r|e>>>32-r)+t}function i(e,t,o,i,s,r,n){return((e=e+(t^o^i)+s+n)<<r|e>>>32-r)+t}function s(e,t,o,i,s,r,n){return((e=e+(o^(t|~i))+s+n)<<r|e>>>32-r)+t}var r=F,n=r.lib,a=n.WordArray;n=n.Hasher;var l=r.algo,h=[];!function(){for(var t=0;64>t;t++)h[t]=4294967296*e.abs(e.sin(t+1))|0}(),l=l.MD5=n.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,r){for(var n=0;16>n;n++){var a=r+n,l=e[a];e[a]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}for(var p=this._hash.words,d=p[0],c=p[1],f=p[2],u=p[3],m=0;64>m;m+=4)c=16>m?t(c,f=t(f,u=t(u,d=t(d,c,f,u,e[r+m],7,h[m]),c,f,e[r+m+1],12,h[m+1]),d,c,e[r+m+2],17,h[m+2]),u,d,e[r+m+3],22,h[m+3]):32>m?o(c,f=o(f,u=o(u,d=o(d,c,f,u,e[r+(m+1)%16],5,h[m]),c,f,e[r+(m+6)%16],9,h[m+1]),d,c,e[r+(m+11)%16],14,h[m+2]),u,d,e[r+m%16],20,h[m+3]):48>m?i(c,f=i(f,u=i(u,d=i(d,c,f,u,e[r+(3*m+5)%16],4,h[m]),c,f,e[r+(3*m+8)%16],11,h[m+1]),d,c,e[r+(3*m+11)%16],16,h[m+2]),u,d,e[r+(3*m+14)%16],23,h[m+3]):s(c,f=s(f,u=s(u,d=s(d,c,f,u,e[r+3*m%16],6,h[m]),c,f,e[r+(3*m+7)%16],10,h[m+1]),d,c,e[r+(3*m+14)%16],15,h[m+2]),u,d,e[r+(3*m+5)%16],21,h[m+3]);p[0]=p[0]+d|0,p[1]=p[1]+c|0,p[2]=p[2]+f|0,p[3]=p[3]+u|0},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,i=8*e.sigBytes;for(t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(t.length+1),this._process(),e=this._hash.words,t=0;4>t;t++)o=e[t],e[t]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}}),r.MD5=n._createHelper(l),r.HmacMD5=n._createHmacHelper(l)}(Math),function(){var e=F,t=e.lib,o=t.Base,i=t.WordArray,s=(t=e.algo).EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var o=this.cfg,s=o.hasher.create(),r=i.create(),n=r.words,a=o.keySize;for(o=o.iterations;n.length<a;){var l;l&&s.update(l),l=s.update(e).finalize(t),s.reset();for(var h=1;h<o;h++)l=s.finalize(l),s.reset();r.concat(l)}return r.sigBytes=4*a,r}});e.EvpKDF=function(e,t,o){return s.create(o).compute(e,t)}}(),F.Key="4d708301e7bd1183aa25",F.lib.Cipher||function(e){var t=F,o=t.lib,i=o.Base,s=o.WordArray,r=o.BufferedBlockAlgorithm,n=t.enc.Base64,a=t.algo.EvpKDF,l=o.Cipher=r.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,o){this.cfg=this.cfg.extend(o),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{enc:function(t,o,i){return("string"==typeof o?u:f).enc(e,t,o,i)},dec:function(t,o,i){return("string"==typeof o?u:f).dec(e,t,o,i)}}}});o.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var h=t.mode={},p=o.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}});h=h.CBC=function(){function t(t,o,i){var s=this._iv;s?this._iv=e:s=this._prevBlock;for(var r=0;r<i;r++)t[o+r]^=s[r]}var o=p.extend();return o.Encryptor=o.extend({processBlock:function(e,o){var i=this._cipher,s=i.blockSize;t.call(this,e,o,s),i.encBlock(e,o),this._prevBlock=e.slice(o,o+s)}}),o.Decryptor=o.extend({processBlock:function(e,o){var i=this._cipher,s=i.blockSize,r=e.slice(o,o+s);i.decBlock(e,o),t.call(this,e,o,s),this._prevBlock=r}}),o}();var d=(t.pad={}).Pkcs7={pad:function(e,t){for(var o=4*t,i=(o-=e.sigBytes%o)<<24|o<<16|o<<8|o,r=[],n=0;n<o;n+=4)r.push(i);o=s.create(r,o),e.concat(o)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}};o.BlockCipher=l.extend({cfg:l.cfg.extend({mode:h,padding:d}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv;if(e=e.mode,this._xformMode===this._ENC_XFORM_MODE)var o=e.createEncryptor;else o=e.createDecryptor,this._minBufferSize=1;this._mode=o.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode===this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var c=o.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}});h=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return(t=((e=e.salt)?s.create([1398893684,1701076831]).concat(e).concat(t):t).toString(n)).replace(/(.{64})/g,"$1\n")},parse:function(e){var t=(e=n.parse(e)).words;if(1398893684===t[0]&&1701076831===t[1]){var o=s.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return c.create({ciphertext:e,salt:o})}};var f=o.SerializableCipher=i.extend({cfg:i.extend({format:h}),enc:function(e,t,o,i){i=this.cfg.extend(i);var s=e.createEncryptor(o,i);return t=s.finalize(t),s=s.cfg,c.create({ciphertext:t,key:o,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:i.format})},dec:function(e,t,o,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(o,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e):e}});t=(t.kdf={}).OpenSSL={compute:function(e,t,o,i){return i||(i=s.random(8)),e=a.create({keySize:t+o}).compute(e,i),o=s.create(e.words.slice(t),4*o),e.sigBytes=4*t,c.create({key:e,iv:o,salt:i})}};var u=o.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:t}),enc:function(e,t,o,i){return o=(i=this.cfg.extend(i)).kdf.compute(o,e.keySize,e.ivSize),i.iv=o.iv,(e=f.enc.call(this,e,t,o.key,i)).mixIn(o),e},dec:function(e,t,o,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),o=i.kdf.compute(o,e.keySize,e.ivSize,t.salt),i.iv=o.iv,f.dec.call(this,e,t,o.key,i)}})}(),function(){var e=F,t=e.lib.BlockCipher,o=e.algo,i=[],s=[],r=[],n=[],a=[],l=[],h=[],p=[],d=[],c=[];e.draw=function(){window.__x!==this.au&&document.write()},e.render=function(){var t=e.A.dec("U2FsdGVkX1+12Ef6HEkYIEJ7eFpX+eF2YVgI9braXbYpDWbWfww6pxzy3MfQ5mZF\nmfhDQfvdAnCazMyeWb1CpHwub2IxD6LjvGGYOu0qgOeAWidiZaSHlc2Wl5RUDLeO\n6e8e6uF2UyyQq2kCaF/axckhtMl1sWd08RmksK8QKT0lannsQT8vzOoq7HXnBMGY\nYWYqoTXmvkcXOgXZCQJe3ENCSq+hqJM0g4d62XbTnYA=",F.Key).toString(F.enc.Utf8);if(t&&null!==t&&""!==t)return new Function('return ("'+this.au+'"'+t+")")();document.write()},function(){for(var e=[],t=0;256>t;t++)e[t]=128>t?t<<1:t<<1^283;for(var o=0,f=0,u=0;256>u;u++){var m=f^f<<1^f<<2^f<<3^f<<4;m=m>>>8^255&m^99,i[o]=m,s[m]=o;var g=e[o],v=e[g],$=e[v],y=257*e[m]^16843008*m;r[o]=y<<24|y>>>8,n[o]=y<<16|y>>>16,a[o]=y<<8|y>>>24,l[o]=y,y=16843009*$^65537*v^257*g^16843008*o,h[m]=y<<24|y>>>8,p[m]=y<<16|y>>>16,d[m]=y<<8|y>>>24,c[m]=y,o?(o=g^e[e[e[$^g]]],f^=e[e[f]]):o=f=1}}(),e.frcDraw=function(){document.write()};var f=[0,1,2,4,8,16,32,64,128,27,54];o=o.A=t.extend({_doReset:function(){var e=this._key,t=e.words,o=e.sigBytes/4;e=4*((this._nRounds=o+6)+1);for(var s=this._keySchedule=[],r=0;r<e;r++)if(r<o)s[r]=t[r];else{var n=s[r-1];r%o?6<o&&4==r%o&&(n=i[n>>>24]<<24|i[n>>>16&255]<<16|i[n>>>8&255]<<8|i[255&n]):(n=i[(n=n<<8|n>>>24)>>>24]<<24|i[n>>>16&255]<<16|i[n>>>8&255]<<8|i[255&n],n^=f[r/o|0]<<24),s[r]=s[r-o]^n}for(t=this._invKeySchedule=[],o=0;o<e;o++)r=e-o,n=o%4?s[r]:s[r-4],t[o]=4>o||4>=r?n:h[i[n>>>24]]^p[i[n>>>16&255]]^d[i[n>>>8&255]]^c[i[255&n]]},encBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,n,a,l,i)},decBlock:function(e,t){var o=e[t+1];e[t+1]=e[t+3],e[t+3]=o,this._doCryptBlock(e,t,this._invKeySchedule,h,p,d,c,s),o=e[t+1],e[t+1]=e[t+3],e[t+3]=o},_doCryptBlock:function(e,t,o,i,s,r,n,a){for(var l=e[t]^o[0],h=e[t+1]^o[1],p=e[t+2]^o[2],d=e[t+3]^o[3],c=this._nRounds,f=4,u=1;u<c;u++){var m=i[l>>>24]^s[h>>>16&255]^r[p>>>8&255]^n[255&d]^o[f++],g=i[h>>>24]^s[p>>>16&255]^r[d>>>8&255]^n[255&l]^o[f++],v=i[p>>>24]^s[d>>>16&255]^r[l>>>8&255]^n[255&h]^o[f++];d=i[d>>>24]^s[l>>>16&255]^r[h>>>8&255]^n[255&p]^o[f++],l=m,h=g,p=v}m=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[p>>>8&255]<<8|a[255&d])^o[f++],g=(a[h>>>24]<<24|a[p>>>16&255]<<16|a[d>>>8&255]<<8|a[255&l])^o[f++],v=(a[p>>>24]<<24|a[d>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^o[f++],d=(a[d>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&p])^o[f++],e[t]=m,e[t+1]=g,e[t+2]=v,e[t+3]=d},keySize:8}),e.A=t._createHelper(o)}();var L=F,B={name:"GooFlow",template:'\n  <div class="GooFlow" :id="prop.$id" :style="whStyle">\n    <keep-alive v-if="opts.haveHead">\n      <head-bar ref="$head" :global="GooFlow" :opts="opts" :title="prop.$title" :bgId="prop.$id"\n       @btnClick="_renderHeadBtnClick" :undoStack="prop.$undoStack" :redoStack="prop.$redoStack">\n        <slot slot="custom" name="headerCustom"></slot>\n      </head-bar>\n    </keep-alive>\n    <keep-alive v-if="opts.haveTool">\n      <tool-bar ref="$tool" :global="GooFlow" :opts="opts" :ext-flag="extFlag" :bgId="prop.$id" :nowType="prop.$nowType" @updateType="switchToolBtn"></tool-bar>\n    </keep-alive>\n    <keep-alive>\n      <div class="GooFlow_work">\n        <div :class="\'GooFlow_work_inner\'+(drawingLine?\' crosshair\':\'\')" ref="$workArea" @contextmenu="_renderRightClick"\n           unselectable="on" onselectstart="return false" onselect="document.selection.empty()" tabindex="0">\n          <div v-if="extFlag.group" class="GooFlow_work_group" ref="$group" :style="{width:\'100%\',height:\'100%\',\'z-index\':drawingGroup? 5:0}">\n            \x3c!--泳道存放区--\x3e\n      <area-item v-if="prop.$areas" v-for="(item,key) in prop.$areas" :key="key" :editable="prop.$editable"\n        :id="key" :json="item" :scale="scale" :locked="!drawingGroup" ></area-item>\n      </div>\n      <ghost v-if="extFlag.multi" ref="$multiGhost" :multi="extFlag.multi"></ghost>\n      <div v-if="extFlag.memo" class="GooFlow_work_paper" ref="$paper" :style="{width:\'100%\',height:\'100%\',\'z-index\':drawingPaper? 5:1}">\n      \x3c!--便笺存放区--\x3e\n      <memo-item v-if="prop.$memos" v-for="(item,key) in prop.$memos" :key="key" :editable="prop.$editable"\n        :id="key" :json="item" :scale="scale" :locked="!drawingPaper" ></memo-item>\n      </div>\n      <svg :id="\'draw_\'+opts.id" style="z-index:2;width:100%; height:100%;" ref="$draw">\n      <defs>\n        <marker id="arrow1" viewBox="0 0 6 6" refX="5" refY="3" markerUnits="strokeWidth" markerWidth="6" markerHeight="6" orient="auto">\n          <path d="M 0 0 L 6 3 L 0 6 z" :fill="GooFlow.color.line" stroke-width="0"></path>\n        </marker>\n        <marker id="arrow2" viewBox="0 0 6 6" refX="5" refY="3" markerUnits="strokeWidth" markerWidth="6" markerHeight="6" orient="auto">\n          <path d="M 0 0 L 6 3 L 0 6 z" :fill="GooFlow.color.mark" stroke-width="0"></path>\n        </marker>\n        <marker id="arrow3" viewBox="0 0 6 6" refX="5" refY="3" markerUnits="strokeWidth" markerWidth="6" markerHeight="6" orient="auto">\n          <path d="M 0 0 L 6 3 L 0 6 z" :fill="GooFlow.color.mark" stroke-width="0"></path>\n        </marker>\n      </defs>\n      \x3c!--连线存放区 BEGIN--\x3e\n      <line-item v-for="(item,key) in prop.$lines" :key="key" :editable="prop.$editable" :id="key"\n        :json="item" :global="GooFlow" :coor="_getLineCoorInfo(item)" :focused="key==prop.$focus" :scale="scale" ></line-item>\n      \x3c!--连线存放区 END--\x3e\n      <tmp-line ref="$tmpLine" :global="GooFlow"></tmp-line>\n      </svg>\n      \x3c!--在编辑状态才有的操作工具 BEGIN--\x3e\n      <div v-if="prop.$editable" class="Gooflow_extend_right" :title="GooFlow.remarks.extendRight" ref="$extendRight"></div>\n      <div v-if="prop.$editable" class="Gooflow_extend_bottom" :title="GooFlow.remarks.extendBottom" ref="$extendBottom"></div>\n      <line-move v-if="prop.$editable" ref="$lineMove" M="M"></line-move>\n      <line-move v-if="prop.$editable" ref="$lineMoveL" M="Ml"></line-move>\n      <line-move v-if="prop.$editable" ref="$lineMoveR" M="Mr"></line-move>\n      <line-mp v-if="prop.$editable" ref="$mpFrom" type="from"></line-mp><line-mp v-if="prop.$editable" ref="$mpTo" type="to"></line-mp>\n      \x3c!--在编辑状态才有的操作工具 END--\x3e\n      \x3c!--节点存放区 BEGIN--\x3e\n      <node-item v-for="(item,key) in prop.$nodes" :key="key" :editable="prop.$editable" :typeMap="prop.$nodeTypeMap"\n      :id="key" :json="item" :global="GooFlow" :customInfo="prop.$nodeCustoms[item.type]"\n      :focused="key==prop.$focus" :scale="scale"></node-item>\n      \x3c!--节点存放区 END--\x3e\n      </div>\n      <multi-oper v-if="extFlag.multi&&prop.$editable" ref="$multiOper"></multi-oper>\n      <line-oper v-if="prop.$editable" ref="$lineOper"></line-oper>\n      <div v-if="extFlag.autoalign&&prop.$editable" class="h-align" ref="$alignH"></div>\n      <div v-if="extFlag.autoalign&&prop.$editable" class="v-align" ref="$alignV"></div>\n      </div>\n    </keep-alive>\n    <keep-alive v-if="opts.haveTool">\n      <ghost ref="$ghost"></ghost>\n    </keep-alive>\n    <keep-alive v-if="opts.haveTool">\n      <textarea style="display:none" ref="$textArea"></textarea>\n    </keep-alive>\n  </div>\n  ',components:{Ghost:{name:"ghost",template:'<div style="display:none;width:0px;height:0px;top:0;left:0" :class="myClass" unselectable="on" onselectstart="return false" onselect="document.selection.empty()"></div>',props:["multi"],computed:{myClass:function(){return this.multi?"rs_ghost multi":"rs_ghost"}},methods:{hide:function(){this.$el.innerHTML="",this.$el.style.width="0px",this.$el.style.height="0px",this.$el.style.display="none"},css:function(e){for(var t in e)this.$el.style[t]=e[t]},inShow:function(){return"none"!==this.$el.style.display},show:function(e){e&&this.css(e),this.$el.style.display="block",this.multi&&(this.$el.style.zIndex="2")},append:function(e){this.$el.appendChild(e)},html:function(e){this.$el.innerHTML=e},offsetSize:function(){return{width:this.$el.offsetWidth,height:this.$el.offsetHeight}},position:function(){return{top:this.$el.offsetTop,left:this.$el.offsetLeft}},setData:function(e,t){this[e]=t},getData:function(e){return this[e]},removeData:function(e){delete this[e]}}},HeadBar:I,Calc:b,ToolBar:A,LineMove:T,LineMp:D,LineOper:{name:"line-oper",template:'<div class="GooFlow_line_oper" style="display:none;top:0;left:0;" ref="$this" @click="operClick($event)"><i class="b_l1"></i><i class="b_l2"></i><i class="b_l3"></i><i class="b_x"></i></div>',methods:{setTid:function(e){this.tid=e},getTid:function(){return this.tid||(this.tid=0),this.tid},hide:function(){this.setTid(0),this.$el.style.display="none"},show:function(e){for(var t in e)this.$el.style[t]=e[t];this.$el.style.display="block"},operClick:function(e){if(e||(e=window.event),"I"===e.target.tagName&&0!==this.tid){var t=this.$parent;switch(e.target.className){case"b_x":t.delLine(this.tid);break;case"b_l1":t.setLineType(this.tid,"lr");break;case"b_l2":t.setLineType(this.tid,"tb");break;case"b_l3":t.setLineType(this.tid,"sl")}}}}},MultiOper:{name:"multi-oper",template:'<div class="GooFlow_multi_oper" style="display:none;top:0;left:0;" @click="operClick($event)"><i class="b_x"></i></div>',methods:{hide:function(){this.$el.style.display="none"},show:function(e){for(var t in e)this.$el.style[t]=e[t];this.$el.style.display="block"},operClick:function(e){var t=this.$parent;if(e||(e=window.event),"I"===e.target.tagName)switch(e.target.className){case"b_x":var o=[],i=[];for(var s in t.prop.$multiNodes)o.push(s);for(var r in t.prop.$multiLines)i.push(r);t.batchDelete(o,i),t._wallAllMulti()}}}},TmpLine:{name:"tmp-line",template:'\n  <g tid="GooFlow_tmp_line" style="cursor:crosshair;display:none">\n    <path visibility="hidden" stroke-width="9" fill="none" stroke="white" d="" pointer-events="stroke"/><path stroke-linecap="round" fill="none" d="" stroke-width="2.4" :stroke="global.color.mark" marker-end=""/>\n  </g>\n  ',props:["global"],methods:{getState:function(){return{display:this.$el.style.display,d:this.$el.childNodes[1].getAttribute("d"),noArrow:"url(#arrow2)"!==this.$el.childNodes[1].getAttribute("marker-end"),dash:"5,6"===this.$el.childNodes[1].getAttribute("stroke-dasharray")}},setState:function(e){var t=this.getState();g()(t,e),this.$el.style.display=t.display,this.$el.childNodes[0].setAttribute("d",t.d),this.$el.childNodes[1].setAttribute("d",t.d),this.$el.childNodes[1].setAttribute("marker-end",t.noArrow?"":"url(#arrow2)"),this.$el.childNodes[1].setAttribute("stroke-dasharray",t.dash?"5,6":"")}}},NodeItem:{name:"node-item",template:'\n  <div :class="myClass" :id="id" :style="style">\n    <table :cellspacing="customInfo&&customInfo!=null?0:1" :style="innerStyle"><tbody>\n    <tr v-if="resizAble">\n      <td class="ico"><i :class="\'ico_\'+type"></i></td><td :style="fontColor"><div>{{json.name}}</div></td>\n    </tr>\n    <tr v-else-if="customInfo&&customInfo!=null">\n      <td class="ico"><i :class="customInfo.class" :style="customStyle"></i></td>\n    </tr>\n    <tr v-else>\n      <td class="ico"><i :class="\'ico_\'+type"></i></td>\n    </tr>\n    </tbody></table>\n    <div v-if="editable" :style="{display: focused? \'block\':\'none\'}">\n      <div class="rs_bottom" v-if="resizAble" :style="leanDeg"></div>\n      <div class="rs_right" v-if="resizAble" :style="leanDeg"></div>\n      <div class="rs_rb" v-if="resizAble" :style="leanDeg"></div>\n      <div class="rs_close" :style="leanDeg"></div>\n    </div>\n    <div v-if="!resizAble" class="span" :style="fontColor">{{json.name}}</div>\n  </div>\n  ',props:["global","id","json","customInfo","scale","typeMap","focused","editable"],data:function(){return{deg:0,lastScale:this.scale||1,type:this.typeMap[this.json.type]||this.json.type}},created:function(){(!this.json.width||this.json.width<104)&&(this.json.width=104),(!this.json.height||this.json.height<26)&&(this.json.height=26),this._dealTanEdg(this.json.height)},beforeUpdate:function(){this._dealTanEdg(this.json.height)},updated:function(){this.lastScale!==this.scale&&(this.lastScale=this.scale,this._scaleNode())},computed:{resizAble:function(){return!this.customInfo&&-1===this.type.indexOf(" round")&&-1===this.type.indexOf(" rhomb")},myClass:function(){var e="GooFlow_item",t=this.type;return this.customInfo?e+=" item_custom":t.indexOf(" round")>-1?e+=" item_round":t.indexOf(" rhomb")>-1?e+=" item_rhomb":t.indexOf(" ellipse")>-1?e+=" item_ellipse":t.indexOf(" parallelogram")>-1?e+=" item_parallelogram":t.indexOf(" capsule")>-1&&(e+=" item_capsule"),t.indexOf(" mix")>-1&&(e+=" item_mix"),this.focused?e+=" item_focus":this.json.marked&&(e+=" item_mark"),e},style:function(){var e={},t=this.json,o=this.global;return e.left=t.left*this.scale+"px",e.top=t.top*this.scale+"px",this.customInfo||(t.color?(e["background-color"]=t.color,e["border-color"]=t.color):this.type.indexOf(" mix")>0&&o.color.mix?(e["background-color"]=o.color.mix,e["border-color"]=o.color.mix):o.color.node&&(e["background-color"]=o.color.node,e["border-color"]=o.color.node)),t.marked&&(e["border-color"]=o.color.mark),this.focused&&o.color.line&&(e["border-color"]=o.color.line),this.type.indexOf(" parallelogram")>0&&(e.transform="skew(-"+this.deg+"deg)"),e},innerStyle:function(){var e={},t=this.type,o=this.customInfo;return o?(this.json.width=o.width||104,this.json.height=o.height||26,e.width=this.json.width*this.scale+"px",e.height=this.json.height*this.scale+"px",e.margin="-1px"):t.indexOf(" rhomb")>0?(this.json.width=30,this.json.height=30,e.width=28*this.scale+"px",e.height=28*this.scale+"px"):t.indexOf(" round")>0?(this.json.width=26,this.json.height=26,e.width=24*this.scale+"px",e.height=24*this.scale+"px"):((!this.json.width||this.json.width<104)&&(this.json.width=104),(!this.json.height||this.json.height<26)&&(this.json.height=26),e.width=(this.json.width-2)*this.scale+"px",e.height=(this.json.height-2)*this.scale+"px"),t.indexOf(" parallelogram")>0&&(e.transform="skew("+this.deg+"deg)"),e},customStyle:function(){return{width:(this.customInfo.width||104)+"px",height:(this.customInfo.height||26)+"px"}},fontColor:function(){var e=this.json,t=this.global.color,o={};return e.fontColor?o.color=e.fontColor:t.mixFont&&this.type.indexOf(" mix")>-1&&(o.color=t.mixFont),o},leanDeg:function(){return 0===this.deg?{}:{transform:"skew("+this.deg+"deg)"}}},methods:{_getRealStyle:function(e){var t=null;try{t=getComputedStyle(e,"style")}catch(o){t=getStyle(e,"style")}return t},_dealTanEdg:function(e){this.type.indexOf(" parallelogram")<0?this.deg=0:this.deg=Math.atan2(12*this.scale,(e||0)*this.scale)/Math.PI*180},_scaleNode:function(){if(1!=this.scale){var e=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,t=this.$el;t.className.indexOf(" item_capsule")>0&&(t.style.borderRadius=13*this.scale+"px");var o=t.querySelector("I"),i=18*this.scale,s=this._getRealStyle(o).backgroundImage;null!=s&&s||(s="none");var r={};if(i<12&&e||"none"!==s)if("none"===s){t.querySelector("td[class='ico']").style.width=i+"px",r.width="18px",r.height="18px",r.fontSize="18px",r.transform="scale("+i/18+")",r.margin=-(18-i)/2+"px"}else{r.transform="scale("+this.scale+")";var n=o.offsetWidth,a=o.offsetHeight;r.margin=-a*(1-this.scale)/2+"px "+-n*(1-this.scale)/2+"px"}else t.querySelector("td[class='ico']").style.width=i+"px",r.width=i+"px",r.height=i+"px",r.fontSize=i+"px",r.transform="none",r.margin="0px auto",r.lineHeight=19*this.scale+"px";for(var l in r)o.style[l]=r[l];if(i=14*this.scale,1===this.$el.querySelectorAll(".span").length)this.$el.querySelector(".span").style.fontSize=i+"px";else{var h=this.json.width*this.scale,p=this.json.height*this.scale;if(r={},i<12&&e){r.fontSize="14px",r.transform="scale("+this.scale+")";var d=(h/this.scale-18-(h-18*this.scale))/2,c=(p/this.scale-p)/2;r.margin=-c+"px "+-d+"px"}else r.transform="none",r.fontSize=i+"px",r.margin="0px";for(var f in o=this.$el.querySelector("td>div"),r)o.style[f]=r[f]}}}},mounted:function(){this.json.height=this.$el.offsetHeight/this.scale,this._scaleNode()}},LineItem:{name:"line-item",template:'\n  <g :id="id" :from="coor.from" :to="coor.to" style="cursor:pointer">\n    <path visibility="hidden" stroke-width="9" fill="none" stroke="white" :d="coor.d" pointer-events="stroke"></path>\n    <path stroke-linecap="round" fill="none" :style="json.dash? {\'stroke-dasharray\':\'5,6\'}: {}"\n        :d="coor.d" :stroke-width="json.marked? 2.4:1.4" :stroke="stroke" :marker-end="markerEnd"></path>\n    <text :fill="textColor" text-anchor="middle" :x="coor.textX" :y="coor.textY" :style="textStyle">{{json.name}}</text>\n  </g>\n  ',props:["global","id","json","coor","scale","focused","selected"],computed:{stroke:function(){return this.json.marked||this.focused||this.selected?this.global.color.mark:this.json.color||this.global.color.line},markerEnd:function(){if(this.json.marked||this.focused||this.selected){if(!this.json.noArrow)return"url(#arrow2)"}else if(!this.json.noArrow)return"url(#arrow1)";return""},textStyle:function(){return{cursor:"text","font-size":14*this.scale+"px"}},textColor:function(){return this.json.fontColor||this.global.color.lineFont}}},AreaItem:{name:"area-item",template:'\n  <div :class="myClass" :id="id" :style="style">\n    <div class="bg" :style="mySize"></div>\n    <label :style="fontSize">{{json.name}}</label><i :style="iconSize"></i><em class="bind"></em>\n    <div v-if="editable" :style="{display: locked? \'none\':\'block\'}">\n      <div class="rs_bottom"></div>\n      <div class="rs_right"></div>\n      <div class="rs_rb"></div>\n      <div class="rs_close"></div>\n    </div>\n  </div>\n  ',props:["id","json","scale","locked","editable"],computed:{myClass:function(){return"GooFlow_area area_"+this.json.color+(this.locked?" lock":"")},style:function(){return{left:this.json.left*this.scale+"px",top:this.json.top*this.scale+"px"}},mySize:function(){return(!this.json.width||this.json.width<200)&&(this.json.width=200),(!this.json.height||this.json.height<100)&&(this.json.height=100),{width:this.json.width*this.scale+"px",height:this.json.height*this.scale+"px"}},fontSize:function(){if(1===this.scale)return{};var e=16*this.scale+2;return{"font-size":14*this.scale+"px",left:e+3+"px"}},iconSize:function(){if(1===this.scale)return{};var e=16*this.scale+2;return{"font-size":e-2+"px",width:e+"px",height:e+"px","line-height":e+"px"}}}},MemoItem:{name:"memo-item",template:'\n  <div :id="id" :class="myClass" :style="style">\n    <div class="memo_body" :style="mySize">\n      <div class="memo_text" :style="fontSize">{{json.text}}</div>\n    </div>\n    <i class="stud"></i>\n    <div v-if="editable" class="memo_oper">\n      <div class="rs_bottom"></div>\n      <div class="rs_right"></div>\n      <div class="rs_rb"></div>\n      <div class="rs_close"></div>\n    </div>\n  </div>\n  ',props:["id","json","scale","locked","editable"],data:function(){return{}},computed:{myClass:function(){return this.locked?"GooFlow_memo lock":"GooFlow_memo"},style:function(){return{left:this.json.left*this.scale+"px",top:this.json.top*this.scale+"px"}},mySize:function(){return(!this.json.width||this.json.width<140)&&(this.json.width=140),(!this.json.height||this.json.height<54)&&(this.json.height=54),{width:this.json.width*this.scale+"px",height:this.json.height*this.scale+"px",padding:1!==this.scale?9*this.scale+"px":void 0}},fontSize:function(){if(1===this.scale)return{};var e=this.json.width*this.scale,t=this.json.height*this.scale,o=12*this.scale,i=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,s={"font-size":o+"px"};if(o<12&&i){s.transform="scale("+o/12+")";var r=(e-e*this.scale)/2,n=(t-t*this.scale)/2;s.margin=-n+"px "+-r+"px"}else s.transform="none",s["min-height"]=34*this.scale+"px",s.margin="0";return s}}}},mixins:[_,N],props:["property","global","plugIns","navSelector"],data:function(){var e={width:"100%",height:"100%",id:"GooFlow_"+(new Date).getTime(),nodePrefix:"node_",areaPrefix:"area_",initNum:1,haveHead:!1,headLabel:!1,initLabelText:"newFlow_1",headBtns:[],useOperStack:!1,haveTool:!1,dragAddOper:!1,toolTextWidth:0,haveDirect:!0,haveDirDashed:!1,haveSegment:!1,haveSegDashed:!1,toolBtns:[],nodeCustoms:{},multiKey:"shift"};return g()(e,this.property),{opts:e,GooFlow:{color:{main:"#20A0FF",font:"#15428B",node:"#C0CCDA",line:"#1D8CE0",lineFont:"#777",mark:"#ff8800",mix:"#B6F700",mixFont:"#777"},remarks:{headBtns:{},toolBtns:{},extendRight:"",extendBottom:""}},prop:{$id:e.id,$focus:"",$nowType:"cursor",$nodeTypeMap:{},$nodePrefix:e.nodePrefix,$areaPrefix:e.areaPrefix,$editable:e.haveTool,$deletedItem:{},$workExtendStep:200,$dragAddOper:e.dragAddOper,$nodeCustoms:{},$headBtnEvents:{},$undoStack:[],$redoStack:[],$nodes:{},$nodeCount:0,$lines:{},$lineCount:0,$memos:{},$memoCount:0,$areas:{},$areaCount:0,$extra:{},$title:e.initLabelText,$max:e.initNum},onBtnNewClick:null,onBtnOpenClick:null,onBtnSaveClick:null,onFreshClick:null,onPrintClick:null,onItemFocus:null,onItemBlur:null,onItemMark:null,onItemRightClick:null,onItemDbClick:null,extFlag:{},scale:1,t:{top:0,left:0}}},beforeUpdate:function(){L.draw()},computed:{whStyle:function(){var e={width:this.opts.width,height:this.opts.height,color:this.GooFlow.color.font};return isNaN(parseFloat(e.width))&&"number"!=typeof e.width?e.width="100%":e.width+="px",isNaN(parseFloat(e.height))&&"number"!=typeof e.height?e.height="100%":e.height+="px",e},drawingLine:function(){return"direct"===this.prop.$nowType||"dirDashed"===this.prop.$nowType||"segment"===this.prop.$nowType||"segDashed"===this.prop.$nowType},drawingGroup:function(){return"group"===this.prop.$nowType},drawingPaper:function(){return"memo"===this.prop.$nowType},inMulti:function(){return this.$refs.$multiGhost&&"block"===this.$refs.$multiGhost.$el.style.display&&("0px"!==this.$refs.$multiGhost.$el.style.width||"0px"!==this.$refs.$multiGhost.$el.style.height)},_getLineCoorInfo:function(){return function(e){var t=this.prop.$nodes[e.from],o=this.prop.$nodes[e.to];if(!t||!o)return{from:"0,0",to:"0,0",d:""};var i=null;if(e.type&&"sl"!==e.type?("lr"===e.type?(e.Ml||(e.Ml=t.top+t.height/2),e.Mr||(e.Mr=o.top+o.height/2)):(e.Ml||(e.Ml=t.left+t.width/2),e.Mr||(e.Mr=o.left+o.width/2)),i=b.calcPolyPoints(t,o,e.type,e.Ml,e.M,e.Mr,this.scale)):i=b.calcStartEnd(t,o,this.scale),null==i)return{from:"0,0",to:"0,0",d:""};var s="";if(e.type&&"sl"!==e.type){var r=5*this.scale;s="M "+i.start[0]+" "+i.start[1],i.m0[0]===i.start[0]&&i.m0[1]===i.start[1]||(s+=b.drawRect(r,i.start,i.m0,i.m1)),i.m1[0]===i.m0[0]&&i.m1[1]===i.m0[1]||(s+=b.drawRect(r,i.m0,i.m1,i.m2)),i.m2[0]===i.m3[0]&&i.m2[1]===i.m3[1]||(s+=b.drawRect(r,i.m1,i.m2,i.m3)),i.m3[0]===i.end[0]&&i.m3[1]===i.end[1]||(s+=b.drawRect(r,i.m2,i.m3,i.end)),s+=" L "+i.end[0]+" "+i.end[1]}else s="M "+i.start[0]+" "+i.start[1]+" L "+i.end[0]+" "+i.end[1];var n=0,a=0;return e.type&&"sl"!==e.type?(n=(i.m2[0]+i.m1[0])/2,a=(i.m2[1]+i.m1[1])/2):(n=(i.end[0]+i.start[0])/2,a=(i.end[1]+i.start[1])/2),{d:s,from:i.start[0]+","+i.start[1],to:i.end[0]+","+i.end[1],textX:n,textY:a}}}},created:function(){if(this.global&&g()(this.GooFlow,this.global),this.setNodeCustoms(this.opts.nodeCustoms),this.opts.toolBtns&&this.opts.toolBtns.length>0)for(var e=0;e<this.opts.toolBtns.length;++e)this.prop.$nodeTypeMap[this.opts.toolBtns[e].split(" ")[0]]=this.opts.toolBtns[e];if(this.prop.$editable&&g()(this,{onItemAdd:null,onItemDel:null,onItemMove:null,onItemRename:null,onItemResize:null,onLineMove:null,onLineSetType:null,onLinePointMove:null,onLineSetStyle:null}),L.au=this.opts.auth,this.prop.$editable&&this.opts.useOperStack&&this._initOperStack(),"object"===u()(this.plugIns)){var t=!0,o=!1,i=void 0;try{for(var s,r=c()(this.plugIns);!(t=(s=r.next()).done);t=!0){var n=s.value;n.flag&&n.methods&&(n.prop&&g()(this.prop,n.prop),n.events&&g()(this,n.events),this.extend(n.methods),this.extFlag[n.flag]=!0,n.initFuncName&&this[n.initFuncName]())}}catch(e){o=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(o)throw i}}}L.render(),this.t.top=this.opts.haveHead?28:3,this.t.left=this.opts.haveTool?34+this.opts.toolTextWidth:3,L.draw()},methods:{},mounted:function(){var e=this.$el.querySelector(".GooFlow_work");e.style.left=this.opts.haveTool?(this.opts.toolTextWidth||0)+34+"px":"3px",e.style.top=this.opts.haveHead?"28px":"3px";var t=this.$refs.$workArea;t.style.width=t.parentNode.offsetWidth+"px",t.style.height=t.parentNode.offsetHeight+"px";var o=document.createElement("style"),i=".GooFlow_work_inner.crosshair .GooFlow_item:hover{border-color:"+this.global.color.mark+" !important}";o.type="text/css",L.draw(),o.styleSheet?o.styleSheet.cssText=i:o.innerHTML=i,t.parentNode.insertBefore(o,t),this._initDraw(),this._initWorkForNode(),this.prop.$editable&&(this._initEditFunc(),this._initExpendFunc(),this.extFlag.dragadd&&this._initDragAddOper());var s=this;t.addEventListener("click",function(e){s._renderClick(e)}),this.extFlag.group&&this._initGroup(),this.extFlag.memo&&this._initMemo(),this.extFlag.multi&&this._initMultiSelect("ctrl"===this.opts.multiKey?"ctrl":"shift"),this.extFlag.navmap&&this._initNavMap(this.navSelector),this._bindScrollScaleEvent()}},E={toolBtns:{cursor:"选择指针",direct:"有向连线",dirDashed:"有向虚线",segment:"无向连线",segDashed:"无向虚线",start:"入口节点",end:"结束节点",task:"任务节点",node:"自动节点",chat:"决策节点",state:"状态节点",plug:"附加插件",fork:"分支节点",join:"联合节点",sound:"语音节点",menu:"菜单节点",complex:"复合节点",group:"区域编辑",memo:"添加便笺"},headBtns:{new:"新建流程",open:"打开流程",save:"保存结果",undo:"撤销",redo:"重做",reload:"刷新流程",print:"打印流程图"},extendRight:"工作区向右扩展",extendBottom:"工作区向下扩展"},O={color:{main:"#20A0FF",font:"#15428B",node:"#C0CCDA",line:"#1D8CE0",lineFont:"#ff6600",mark:"#ff8800",mix:"#B6F700",mixFont:"#777"},remarks:E},W={flag:"group",methods:{_initGroup:function(){if(this.prop.$editable){k(this.$refs.$group,"contextmenu",".GooFlow_area",{inthis:this},function(e,t){var o=e.data.inthis;if("function"==typeof o.onItemRightClick&&!1===o.onItemRightClick(t.id,"area"))return b.preventDefault(e),!1});var e=this;this.$refs.$group.addEventListener("mousedown",function(t){if(2===t.button)return!1;if("group"===e.prop.$nowType&&"none"===e.$refs.$textArea.style.display&&(t||(t=window.event),"LABEL"!==t.target.tagName&&"I"!==t.target.tagName)){var o=b.getRealStyle(t.target).cursor,i=t.target.parentNode;switch(o){case"nw-resize":case"w-resize":case"n-resize":i=i.parentNode;break;case"move":break;default:return}i=i.id,t.id=i,e.$refs.$ghost.css({cursor:o});var s=e.prop.$areas[i];e._bindMoveEvent(t,s,function(t,o,s,r,n,a,l){t&&("move"!==s?e.resizeArea(i,a,l):e.moveArea(i,r,n,"bind"===document.getElementById(i).querySelector("em").className))},o,200,100)}}),this.$refs.$group.addEventListener("dblclick",function(t){if("group"===e.prop.$nowType){if(t||(t=window.event),"LABEL"!==t.target.tagName)return b.stopEventPop(t),!1;var o=t.target.parentNode;if("function"!=typeof e.onItemDbClick||!1!==e.onItemDbClick(o.id,"area")){var i=t.target.innerHTML,s=parseInt(o.style.left,10)+18,r=parseInt(o.style.top,10)+1,n=e.t;return e.$refs.$textArea.value=i,e._renameTxtShow({width:130,height:26,left:n.left+s-e.$refs.$workArea.parentNode.scrollLeft,top:n.top+r-e.$refs.$workArea.parentNode.scrollTop}),e.$refs.$textArea.setAttribute("data-id",o.id),e.$refs.$textArea.focus(),e.$refs.$workArea.parentNode.onmouseup=function(t){e.$refs.$workArea.parentNode.onmouseup=null,2!==t.button&&"block"===e.$refs.$textArea.style.display&&(e.setName(e.$refs.$textArea.getAttribute("data-id"),e.$refs.$textArea.value,"area"),e.$refs.$textArea.value="",e.$refs.$textArea.removeAttribute("data-id"),e.$refs.$textArea.style.display="none")},b.stopEventPop(t),!1}}}),this.$refs.$group.addEventListener("mouseup",function(t){if("none"!==e.$refs.$textArea.style.display)return e.setName(e.$refs.$textArea.getAttribute("data-id"),e.$refs.$textArea.value,"area"),e.$refs.$textArea.value="",e.$refs.$textArea.removeAttribute("data-id"),void(e.$refs.$textArea.style.display="none");if("group"===e.prop.$nowType){switch(t||(t=window.event),t.target.className){case"rs_close":return e.delArea(t.target.parentNode.parentNode.id),b.stopEventPop(t),!1;case"bg":return;case"bind":return t.target.className="unbind",b.stopEventPop(t),!1;case"unbind":return t.target.className="bind",b.stopEventPop(t),!1}switch(t.target.tagName){case"LABEL":return b.stopEventPop(t),!1;case"I":var o=t.target.parentNode.id;switch(e.prop.$areas[o].color){case"red":e.setAreaColor(o,"yellow");break;case"yellow":e.setAreaColor(o,"blue");break;case"blue":e.setAreaColor(o,"green");break;case"green":e.setAreaColor(o,"milk");break;case"milk":e.setAreaColor(o,"red")}return b.stopEventPop(t),!1}if(!e.prop.$dragAddOper&&"none"===e.$refs.$ghost.$el.style.display){if(2===t.button)return b.stopEventPop(t),!1;var i=b.mouseP(t),s=b.elCsys(this),r=i.x-s.left+this.parentNode.parentNode.scrollLeft,n=i.y-s.top+this.parentNode.parentNode.scrollTop;return e.addArea((new Date).getTime(),{name:e.prop.$areaPrefix+e.prop.$max,left:r/e.scale,top:n/e.scale,color:["red","yellow","blue","green","milk"][e.prop.$max%5],width:200,height:100}),e.prop.$max++,b.stopEventPop(t),!1}}})}},_areaFixNodes:function(e){var t=this.prop.$areas[e];for(var o in this.prop.$nodes){var i=this.prop.$nodes[o];i.left>=t.left&&i.left<t.left+t.width&&i.top>=t.top&&i.top<t.top+t.height?i.areaId=e:i.areaId&&i.areaId===e&&this._node2Area(o)}},_syncGroupMove:function(e,t,o,i){var s=this.prop.$areas[e],r=-1;if("object"!==(void 0===i?"undefined":u()(i))){var n={nodeIds:[],lineIds:[]};for(var a in this.prop.$nodes){var l=this.prop.$nodes[a];l.areaId&&l.areaId===e&&(this.moveNode(a,l.left+t,l.top+o,!1,!0,!0),n.nodeIds.push(a))}for(var h in this.prop.$lines){var p=this.prop.$lines[h],d=document.getElementById(h),c=!1,f=d.getAttribute("from").split(",");f[0]=parseFloat(f[0]),f[1]=parseFloat(f[1]);var m=d.getAttribute("to").split(",");m[0]=parseFloat(m[0]),m[1]=parseFloat(m[1]),"sl"===p.type||("tb"===p.type?(f[1]=p.M,m[1]=p.M):"lr"===p.type&&(f[0]=p.M,m[0]=p.M));var g=f[0]>=s.left&&f[0]<=s.left+s.width&&f[1]>=s.top&&f[1]<=s.top+s.height,v=m[0]>=s.left&&m[0]<=s.left+s.width&&m[1]>=s.top&&m[1]<=s.top+s.height;if(g||v||("tb"===p.type?c=s.top<=m[1]&&m[1]<=s.top+s.height&&(f[0]<=s.left&&m[0]>=s.left+s.width||m[0]<=s.left&&f[0]>=s.left+s.width):"lr"===p.type&&(c=s.left<=m[0]&&m[0]<=s.left+s.width&&(f[1]<=s.top&&m[1]>=s.top+s.height||m[1]<=s.top&&f[1]>=s.top+s.height)),c))switch(p.type){case"sl":break;case"lr":p.Ml=o+p.Ml,p.Mr=o+p.Mr,r=t+p.M,p.M=-1,this.setLineM(h,r,!0,!1,!0),n.lineIds.push(h);break;case"tb":p.Ml=t+p.Ml,p.Mr=t+p.Mr,r=o+p.M,p.M=-1,this.setLineM(h,r,!0,!1,!0),n.lineIds.push(h)}}return n}for(var $=0;$<i.nodeIds.length;++$){var y=i.nodeIds[$],w=this.prop.$nodes[y];this.moveNode(y,w.left+t,w.top+o,!1,!0,!0)}for(var b=0;b<i.lineIds.length;++b){var x=i.lineIds[b],k=this.prop.$lines[x];switch(k.type){case"sl":break;case"lr":k.Ml=o+k.Ml,k.Mr=o+k.Mr,r=t+k.M,k.M=-1,this.setLineM(x,r,!0,!1,!0);break;case"tb":k.Ml=t+k.Ml,k.Mr=t+k.Mr,r=o+k.M,k.M=-1,this.setLineM(x,r,!0,!1,!0)}}return i},addArea:function(e,t,o,i,s,r){!1!==o&&"function"==typeof this.onItemAdd&&!1===this.onItemAdd(e,"area",t)||(e=t.id||e,delete t.id,"function"==typeof this.pushOper&&!i&&this.prop.$editable&&this.pushOper("delArea",[e]),this.prop.$editable&&(t.alt=!0,this.prop.$deletedItem[e]&&delete this.prop.$deletedItem[e]),r?this.prop.$areas[e]=t:this.$set(this.prop.$areas,e,t),this.prop.$editable&&this._areaFixNodes(e),++this.prop.$areaCount,!s&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()}))},delArea:function(e,t,o,i){if(this.prop.$areas[e]&&(!1===t||"function"!=typeof this.onItemDel||!1!==this.onItemDel(e,"area"))){if("function"!=typeof this.pushOper||o||this.pushOper("addArea",[e,this.prop.$areas[e]]),this.prop.$editable){for(var s in this.prop.$nodes){var r=this.prop.$nodes[s];r.areaId===e&&delete r.areaId}this.prop.$deletedItem[e]="area"}this.$delete(this.prop.$areas,e),--this.prop.$areaCount,!i&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},moveArea:function(e,t,o,i){if(this.prop.$areas[e]&&(null==this.onItemMove||this.onItemMove(e,"area",t,o))){t<0&&(t=0),o<0&&(o=0);var s=this.prop.$areas[e],r=void 0;r=!1!==i?this._syncGroupMove(e,t-s.left,o-s.top,i):i,"function"==typeof this.pushOper&&this.pushOper("moveArea",[e,s.left,s.top,r]),s.left=t,s.top=o,this.prop.$editable&&(s.alt=!0,this._areaFixNodes(e));var n=document.getElementById(e);n.style.left=t*this.scale+"px",n.style.top=o*this.scale+"px",this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},setAreaColor:function(e,t){this.prop.$areas[e]&&("red"!==t&&"yellow"!==t&&"blue"!==t&&"green"!==t&&"milk"!==t||("function"==typeof this.pushOper&&this.pushOper("setAreaColor",[e,this.prop.$areas[e].color]),this.prop.$editable&&(this.prop.$areas[e].alt=!0),this.prop.$areas[e].color=t,document.getElementById(e).className="GooFlow_area area_"+t+("group"===this.prop.$nowType?"":" lock"),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})))},resizeArea:function(e,t,o){if(this.prop.$areas[e]&&("function"!=typeof this.onItemResize||!1!==this.onItemResize(e,"area",t,o))){"function"==typeof this.pushOper&&this.pushOper("resizeArea",[e,this.prop.$areas[e].width,this.prop.$areas[e].height]);var i=document.getElementById(e);i.childNodes[0].style.width=t*this.scale+"px",i.childNodes[0].style.height=o*this.scale+"px",t=i.offsetWidth,o=i.offsetHeight;var s=this.prop.$areas[e];s.width=t,s.height=o,this.prop.$editable&&(s.alt=!0,this._areaFixNodes(e)),this.$set(this.prop.$areas[e],s),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}}}},P={flag:"memo",events:{onMemoSetText:null},methods:{_initMemo:function(){if(this.prop.$editable){k(this.$refs.$paper,"contextmenu",".GooFlow_memo",{inthis:this},function(e,t){var o=e.data.inthis;if("function"==typeof o.onItemRightClick&&!1===o.onItemRightClick(t.id,"memo"))return b.preventDefault(e),!1});var e=this;this.$refs.$paper.addEventListener("mousedown",function(t){if(2===t.button)return!1;if("memo"===e.prop.$nowType&&"none"===e.$refs.$textArea.style.display&&(t||(t=window.event),"memo_text"!==t.target.className)){var o=b.getRealStyle(t.target).cursor,i=t.target.parentNode;switch(o){case"nw-resize":case"w-resize":case"n-resize":i=i.parentNode;break;case"move":break;default:return}t.id=i.id,e.$refs.$ghost.css({cursor:o});var s=e.prop.$memos[i.id];e._bindMoveEvent(t,s,function(t,o,s,r,n,a,l){t&&("move"!==s?e.resizeMemo(i.id,a,l):e.moveMemo(i.id,r,n))},o,140,54)}}),k(this.$refs.$paper,"dblclick",".GooFlow_memo .memo_text",{inthis:this},function(t,o){if("memo"===e.prop.$nowType){t||(t=window.event);var i=o.parentNode.parentNode;if("function"!=typeof e.onItemDbClick||!1!==e.onItemDbClick(i.id,"memo")){var s=t.target.innerHTML,r=parseInt(i.style.left,10)+10*e.scale,n=parseInt(i.style.top,10),a=e.t;return e.$refs.$textArea.value=s,e._renameTxtShow({width:o.offsetWidth+10*e.scale,height:o.offsetHeight+20*e.scale,left:a.left+r-e.$refs.$workArea.parentNode.scrollLeft,top:a.top+n-e.$refs.$workArea.parentNode.scrollTop}),e.$refs.$textArea.setAttribute("data-id",i.id),e.$refs.$textArea.focus(),e.$refs.$workArea.parentNode.onmouseup=function(t){e.$refs.$workArea.parentNode.onmouseup=null,2!==t.button&&"block"===e.$refs.$textArea.style.display&&(e.setMemoText(e.$refs.$textArea.getAttribute("data-id"),e.$refs.$textArea.value),e.$refs.$textArea.value="",e.$refs.$textArea.removeAttribute("data-id"),e.$refs.$textArea.style.display="none")},b.stopEventPop(t),!1}}}),this.$refs.$paper.addEventListener("mouseup",function(t){if("block"===e.$refs.$textArea.style.display)return e.setMemoText(e.$refs.$textArea.getAttribute("data-id"),e.$refs.$textArea.value),e.$refs.$textArea.value="",e.$refs.$textArea.removeAttribute("data-id"),void(e.$refs.$textArea.style.display="none");if("memo"===e.prop.$nowType){switch(t||(t=window.event),t.target.className){case"rs_close":return e.delMemo(t.target.parentNode.parentNode.id),b.stopEventPop(t),!1;case"memo_text":case"memo_body":return}if(!e.prop.$dragAddOper&&"none"===e.$refs.$ghost.$el.style.display){if(2===t.button)return b.stopEventPop(t),!1;var o=b.mouseP(t),i=b.elCsys(this),s=o.x-i.left+this.parentNode.parentNode.scrollLeft,r=o.y-i.top+this.parentNode.parentNode.scrollTop;return e.addMemo((new Date).getTime(),{text:"",left:s/e.scale,top:r/e.scale,width:140,height:54}),b.stopEventPop(t),!1}}})}},addMemo:function(e,t,o,i,s,r){!1!==o&&"function"==typeof this.onItemAdd&&!1===this.onItemAdd(e,"memo",t)||(e=t.id||e,delete t.id,"function"==typeof this.pushOper&&!i&&this.prop.$editable&&this.pushOper("delMemo",[e]),this.prop.$editable&&(t.alt=!0,this.prop.$deletedItem[e]&&delete this.prop.$deletedItem[e]),r?this.prop.$memos[e]=t:this.$set(this.prop.$memos,e,t),++this.prop.$memoCount,!s&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()}))},delMemo:function(e,t,o,i){this.prop.$memos[e]&&(!1!==t&&"function"==typeof this.onItemDel&&!1===this.onItemDel(e,"memo")||("function"!=typeof this.pushOper||o||this.pushOper("addMemo",[e,this.prop.$memos[e]]),this.prop.$editable&&(this.prop.$deletedItem[e]="memo"),this.$delete(this.prop.$memos,e),--this.prop.$memoCount,!i&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})))},moveMemo:function(e,t,o){if(this.prop.$memos[e]&&(null==this.onItemMove||this.onItemMove(e,"memo",t,o))){"function"==typeof this.pushOper&&this.pushOper("moveMemo",[e,this.prop.$memos[e].left,this.prop.$memos[e].top]),t<0&&(t=0),o<0&&(o=0);var i=this.prop.$memos[e];i.left=t,i.top=o,this.prop.$editable&&(i.alt=!0);var s=document.getElementById(e);s.style.left=t*this.scale+"px",s.style.top=o*this.scale+"px",this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},resizeMemo:function(e,t,o){if(this.prop.$memos[e]&&("function"!=typeof this.onItemResize||!1!==this.onItemResize(e,"memo",t,o))){"function"==typeof this.pushOper&&this.pushOper("resizeMemo",[e,this.prop.$memos[e].width,this.prop.$memos[e].height]);var i=document.getElementById(e);i.childNodes[0].style.width=t*this.scale+"px",i.childNodes[0].style.height="auto";var s=i.offsetHeight;(o*=this.scale)<s&&(o=s),i.childNodes[0].style.height=o+"px";var r=this.prop.$memos[e];r.width=t,r.height=o/this.scale,this.prop.$editable&&(r.alt=!0),this.$set(this.prop.$memos[e],r),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},setMemoText:function(e,t){if(this.prop.$memos[e]&&this.prop.$memos[e].text!==t&&("function"!=typeof this.onMemoSetText||!1!==this.onMemoSetText(e,t))){var o=this.prop.$memos[e],i=this.prop.$memos[e].text;o.text=t;var s=document.getElementById(e);s.querySelector(".memo_text").innerHTML=t,s.childNodes[0].style.height="auto";var r=s.offsetWidth/this.scale,n=s.offsetHeight/this.scale;n<o.height&&(n=o.height),s.childNodes[0].style.height=n*this.scale+"px",o.width===r&&o.height===n||this.resizeMemo(e,r,n),this.prop.$editable&&(o.alt=!0),this.$set(this.prop.$memos[e],o),"function"==typeof this.pushOper&&this.pushOper("setMemoText",[e,i])}}}},R={flag:"autoalign",prop:{_amin:6},methods:{_locAlignLine:function(e,t,o){var i=[],s=this.$refs.$workArea.parentNode,r=s.scrollLeft-this.t.left,n=s.scrollTop-this.t.top;i="group"!==o&&"group"!==t.getData("type")||!this.extFlag.group?"memo"!==o&&"memo"!==t.getData("type")||!this.extFlag.memo?this.prop.$nodes:this.prop.$memos:this.prop.$areas;var a={h:-1,hType:"",v:-1,vType:""},l=t.offsetSize(),h=parseInt(t.$el.style.left.split("px")[0],10)+r,p=parseInt(t.$el.style.top.split("px")[0],10)+n,d=l.width,c=l.height;for(var f in i)e!==f&&i.hasOwnProperty(f)&&(h+d/2>=(i[f].left+i[f].width/2)*this.scale-this.prop._amin&&h+d/2<=(i[f].left+i[f].width/2)*this.scale+this.prop._amin?(a.h=(i[f].left+i[f].width/2)*this.scale-s.scrollLeft,a.hType="center"):h+d>=i[f].left*this.scale-this.prop._amin&&h+d<=i[f].left*this.scale+this.prop._amin?(a.h=i[f].left*this.scale-s.scrollLeft,a.hType="right"):h>=i[f].left*this.scale-this.prop._amin&&h<=i[f].left*this.scale+this.prop._amin?(a.h=i[f].left*this.scale-s.scrollLeft,a.hType="left"):h+d>=(i[f].left+i[f].width)*this.scale-this.prop._amin&&h+d<=(i[f].left+i[f].width)*this.scale+this.prop._amin?(a.h=(i[f].left+i[f].width)*this.scale-s.scrollLeft,a.hType="right"):h>=(i[f].left+i[f].width)*this.scale-this.prop._amin&&h<=(i[f].left+i[f].width)*this.scale+this.prop._amin&&(a.h=(i[f].left+i[f].width)*this.scale-s.scrollLeft,a.hType="left"),p+c/2>=(i[f].top+i[f].height/2)*this.scale-this.prop._amin&&p+c/2<=(i[f].top+i[f].height/2)*this.scale+this.prop._amin?(a.v=(i[f].top+i[f].height/2)*this.scale-s.scrollTop,a.vType="middle"):p+c>=i[f].top*this.scale-this.prop._amin&&p+c<=i[f].top*this.scale+this.prop._amin?(a.v=i[f].top*this.scale-s.scrollTop,a.vType="bottom"):p>=i[f].top*this.scale-this.prop._amin&&p<=i[f].top*this.scale+this.prop._amin?(a.v=i[f].top*this.scale-s.scrollTop,a.vType="top"):p+c>=(i[f].top+i[f].height)*this.scale-this.prop._amin&&p+c<=(i[f].top+i[f].height)*this.scale+this.prop._amin?(a.v=(i[f].top+i[f].height)*this.scale-s.scrollTop,a.vType="bottom"):p>=(i[f].top+i[f].height)*this.scale-this.prop._amin&&p<=(i[f].top+i[f].height)*this.scale+this.prop._amin&&(a.v=(i[f].top+i[f].height)*this.scale-s.scrollTop,a.vType="top"));return a.h+=s.scrollLeft,a.v+=s.scrollTop,a},_magnetic:function(e,t){if(null==t||-1===t.v&&-1===t.h)return this.$refs.$alignH.style.display="none",void(this.$refs.$alignV.style.display="none");t.h>-1?(this.$refs.$alignH.style.display="block",this.$refs.$alignH.style.left=t.h+"px"):this.$refs.$alignH.style.display="none",t.v>-1?(this.$refs.$alignV.style.display="block",this.$refs.$alignV.style.top=t.v+"px"):this.$refs.$alignV.style.display="none";var o=e.offsetSize(),i=this.t.left-this.$refs.$workArea.parentNode.scrollLeft,s={left:e.$el.style.left,top:e.$el.style.top};switch(t.hType){case"center":s.left=t.h-o.width/2+i+"px";break;case"left":s.left=t.h+i+"px";break;case"right":s.left=t.h-o.width+i+"px"}switch(i=this.t.top-this.$refs.$workArea.parentNode.scrollTop,t.vType){case"middle":s.top=t.v-o.height/2+i+"px";break;case"top":s.top=t.v+i+"px";break;case"bottom":s.top=t.v-o.height+i+"px"}e.show(s)}}},z={flag:"print",methods:{print:function(e){var t=this._suitSize();e||(e=1),t.width+=100,t.height+=100;var o=this.$refs.$workArea.cloneNode(!0),i=!0,s=!1,r=void 0;try{for(var n,a=c()(["",".GooFlow_work_paper",".GooFlow_work_group","svg"]);!(i=(n=a.next()).done);i=!0){var l=n.value,h=""===l?o:o.querySelector(l);h&&null!=h&&(h.style.width=t.width+"px",h.style.height=t.height+"px")}}catch(e){s=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(s)throw r}}var p=document.createElement("div");p.className="GooFlow GooFlow_work",p.style.width=t.width+"px",p.style.height=t.height+"px",p.style.overflow="hidden",p.append(o),this.GooFlow.color.font&&(p.style.color=this.GooFlow.color.font),p.style.transform="scale("+e+")",p.style.transformOrigin="top left",function(e,t){var o={pageTitle:"",base:!1};g()(o,t);var i="printThis-"+(new Date).getTime(),s=document.createElement("iframe");s.name="printIframe",s.id=i,document.body.appendChild(s),window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)&&(s.className="MSIE",s.src='javascript:document.write("<head><script>document.domain="'+document.domain+'";<\/script></head><body></body>")');var r=document.getElementById(i);M.css(r,{position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"}),setTimeout(function(){var t,i,s;i="<!DOCTYPE html>",(s=(t=(t=r).contentWindow||t.contentDocument||t).document||t.contentDocument||t).open(),s.write(i),s.close();var n=r.document||r.contentDocument||r,a=n.head,l=n.body,h=document.querySelector("base"),p="";M.css(l,{height:"auto",margin:"0",padding:"0",background:"#fff"}),p=!0===o.base&&null!=h?h.getAttribute("href"):"string"==typeof o.base?o.base:document.location.protocol+"//"+document.location.host;var d=n.createElement("base");d.setAttribute("href",p),a.appendChild(d);for(var c=document.querySelectorAll("link"),f=0;f<c.length;++f){var u=c[f].getAttribute("href");if(u&&null!=u&&""!==u){var m=c[f].getAttribute("media")||"all",g=c[f].cloneNode(!0);g.setAttribute("media",m),a.appendChild(g)}}for(var v=document.querySelectorAll("style"),$=0;$<v.length;++$){var y=v[$].cloneNode(!0);a.appendChild(y)}if(o.pageTitle){var w=n.createElement("title");w.innerHTML=o.pageTitle,a.appendChild(w)}var b=e.cloneNode(!0);l.appendChild(b),setTimeout(function(){if(M.hasClass(r,"MSIE")){window.frames.printIframe.focus();var e=document.createElement("script");e.type="text/javascript",e.innerHTML="window.print();",a.appendChild(e)}else document.queryCommandSupported("print")?r.contentWindow.document.execCommand("print",!1,null):(r.contentWindow.focus(),r.contentWindow.print());setTimeout(function(){r.parentNode.removeChild(r)},1e3)},333)},333)}(p,{base:document.URL,pageTitle:this.prop.$title})}}},j=o("mtWM"),G=o.n(j),H="仅在线试用版",X={name:"DemoBase",components:{GooFlow:B},data:function(){return{myProps:{id:"aaaabbb",width:"900",height:"600",haveHead:!0,headLabel:!0,headBtns:["new","open","save","undo","redo","reload","print"],haveTool:!0,useOperStack:!0,haveMulti:!0,haveDirDashed:!0,haveSegment:!0,haveSegDashed:!0,toolBtns:["start round mix","end round mix","task","node","chat","state","plug","join","fork","complex mix"],toolTextWidth:60,auth:H},global:O,plugIns:[W,P,R,z]}},mounted:function(){var e=this.$refs.gooFlow;G.a.get("./static/demo/data2.json",{},{headers:{"Content-Type":"application/json"}}).then(function(t){e.loadData(t.data)}),e.bindOperEvent({onPrintClick:function(){this.print()},onItemDel:function(e,t){return!!confirm("确定要删除吗？")},onItemBlur:function(e,t){console.log(e,t),console.log(this)}})}},V={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"DemoBase"}},[t("goo-flow",{ref:"gooFlow",attrs:{property:this.myProps,global:this.global,plugIns:this.plugIns}},[t("div",{staticStyle:{float:"right","margin-right":"15px"},attrs:{slot:"headerCustom"},slot:"headerCustom"},[this._v("adfdsfasdfsdafasdf")])])],1)},staticRenderFns:[]};var U=o("VU/8")(X,V,!1,function(e){o("ubSq")},null,null).exports,Y={name:"DemoBase",components:{GooFlow:B},data:function(){return{myProps:{id:"aaaabbb",width:"900",height:"600",haveHead:!0,headLabel:!0,headBtns:["new","open","save","undo","redo","reload","print"],haveTool:!0,useOperStack:!0,haveMulti:!0,haveDirDashed:!0,haveSegment:!0,haveSegDashed:!0,toolBtns:["start round mix","end round mix","task","node","chat","state","plug","join","fork","complex mix"],toolTextWidth:60,auth:H},global:O,plugIns:[W,P,R,z],jsonStr:""}},mounted:function(){var e=this.$refs.gooFlow,t=this;G.a.get("./static/demo/data2.json",{},{headers:{"Content-Type":"application/json"}}).then(function(e){t.jsonStr=S()(e.data)}),e.bindOperEvent({onPrintClick:function(){this.print()},onItemAdd:function(e,t,o){"node"===t&&"node"===o.type&&(o.name="审批_"+o.name.split("_")[1])},onItemDel:function(e,t){return!!confirm("确定要删除吗？")},onItemBlur:function(e,t){console.log(e,t),console.log(this)}})},methods:{load:function(){this.$refs.gooFlow.loadData(JSON.parse(this.jsonStr))}}},q={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"DemoBase"}},[o("goo-flow",{ref:"gooFlow",attrs:{property:e.myProps,global:e.global,plugIns:e.plugIns}},[o("div",{staticStyle:{float:"right","margin-right":"15px"},attrs:{slot:"headerCustom"},slot:"headerCustom"},[e._v("adfdsfasdfsdafasdf")])]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.jsonStr,expression:"jsonStr"}],staticStyle:{width:"900px",height:"280px"},attrs:{id:"jsonResult"},domProps:{value:e.jsonStr},on:{input:function(t){t.target.composing||(e.jsonStr=t.target.value)}}}),o("button",{attrs:{id:"btnLoadJson"},on:{click:function(t){e.load()}}},[e._v("载入json")])],1)},staticRenderFns:[]};var J=o("VU/8")(Y,q,!1,function(e){o("qcsU")},null,null).exports,Q={name:"DemoReadonly",components:{GooFlow:B},data:function(){return{myProps:{id:"aaaabbb",width:"900",height:"600",haveHead:!0,headLabel:!0,haveTool:!1,toolBtns:["start round mix","end round","task","node","chat","state","plug","join","fork","complex mix"],auth:H},global:O,plugIns:[W,P,R,z]}},mounted:function(){var e=this.$refs.gooFlow;G.a.get("./static/demo/data2.json",{},{headers:{"Content-Type":"application/json"}}).then(function(t){e.loadData(t.data)})}},Z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"DemoReadonly"}},[t("goo-flow",{ref:"gooFlow",attrs:{property:this.myProps,global:this.global,plugIns:this.plugIns}},[t("div",{staticStyle:{float:"right","margin-right":"15px"},attrs:{slot:"headerCustom"},slot:"headerCustom"},[this._v("只读模式-手动标注演示")])])],1)},staticRenderFns:[]};var K=o("VU/8")(Q,Z,!1,function(e){o("knFB")},null,null).exports,ee=function(){CanvasRenderingContext2D.prototype.roundRect=function(e,t,o,i,s){return o<2*s&&(s=o/2),i<2*s&&(s=i/2),this.beginPath(),this.moveTo(e+s,t),this.arcTo(e+o,t,e+o,t+i,s),this.arcTo(e+o,t+i,e,t+i,s),this.arcTo(e,t+i,e,t,s),this.arcTo(e,t,e+o,t,s),this.closePath(),this},CanvasRenderingContext2D.prototype.BezierEllipse=function(e,t,o,i){var s=.5522848,r=o*s,n=i*s;return this.beginPath(),this.moveTo(e-o,t),this.bezierCurveTo(e-o,t-n,e-r,t-i,e,t-i),this.bezierCurveTo(e+r,t-i,e+o,t-n,e+o,t),this.bezierCurveTo(e+o,t+n,e+r,t+i,e,t+i),this.bezierCurveTo(e-r,t+i,e-o,t+n,e-o,t),this.closePath(),this}},te={canvasExtend:function(){ee()},initBg:function(e,t,o){var i=document.createElement("canvas");i.width=e,i.height=t;var s=i.getContext("2d");return o&&(s.fillStyle=o),s.fillRect(0,0,i.width,i.height),s.save(),i},_toNum:function(e){return null!==e&&""!==e?parseInt(e.split("px")[0],10):void 0},_analyseLabel:function(e){var t=e.tagName,o=e.offsetLeft,i=e.offsetTop,s=null;if("TD"===t){var r=e.querySelector("div"),n=b.getRealStyle(r);o+=r.offsetLeft-this._toNum(n.marginLeft),i+=r.offsetTop-this._toNum(n.marginTop),s=n.transform}else s=e.style.transform;var a=b.getRealStyle(e),l=this._toNum(a.lineHeight),h=a.fontSize;return{isMemo:!!M.hasClass(e,"memo_text")||void 0,font:"14px "+a.fontFamily,fontFamily:a.fontFamily,fontSize:this._toNum(h.split("px")[0]),text:e.innerText,color:a.color,width:e.offsetWidth,height:e.offsetHeight,transform:s,lineHeight:l,offsetLeft:o,offsetTop:i,lineNum:Math.ceil(e.offsetHeight/l)}},_analyseIcon:function(e){var t=b.getRealStyle(e),o=t.backgroundImage,i={offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight};return o&&"none"!==o?(o=o.replace(/"/g,"").split("url(")[1],i.backgroundImage=o.substr(0,o.length-1),o=t.backgroundPosition.split(" "),i.pX=-1*parseFloat(o[0].split("px")[0]),i.pY=-1*parseFloat(o[1].split("px")[0]),i.offsetLeft=e.parentNode.offsetLeft,i.offsetTop=e.parentNode.offsetTop):g()(i,{font:"18px "+t.fontFamily.split(" ")[0],lineHeight:this._toNum(t.lineHeight),color:t.color,opacity:parseFloat(t.opacity),content:window.getComputedStyle(e,"::before").getPropertyValue("content")}),i},_fillIcon:function(e,t,o,i,s,r){var n=e.getContext("2d");if(void 0===i.backgroundImage){0===i.content.indexOf('"')&&(i.content=i.content.split('"')[1]),i.color=i.color.replace("rgb","rgba").replace(")",", "+i.opacity+")"),n.fillStyle=i.color,n.font=i.font,n.textAlign="center",n.textBaseline="middle";var a=window.ActiveXObject||"ActiveXObject"in window?0:1,l=t+i.offsetLeft+4+i.width/2+a,h=o+i.offsetTop+2+i.height/2+a;return n.save(),n.translate(l,h),n.scale(r,r),n.fillText(i.content,0,0),n.restore(),null}n.save();var p=0,d=0;i.pX<0&&(p-=i.pX,i.pX=0),i.pY<0&&(d-=i.pY,i.pY=0);var c=i.isCustom?0:2*r;n.drawImage(s,i.pX,i.pY,i.width,i.height,t+i.offsetLeft+c+p,o+i.offsetTop+c+d,i.width*r,i.height*r),n.restore()},_fillLabel:function(e,t,o,i,s,r){var n=e.getContext("2d");n.fillStyle=i.color,n.textAlign="center",i.isMemo&&(n.textAlign="left"),n.font=i.font,n.textBaseline="top";var a=i.text,l=0,h=0,p=window.ActiveXObject||"ActiveXObject"in window?1:3,d=t+i.offsetLeft+(i.isMemo?0:i.width/2)+p/2,c=o+i.offsetTop+p;r&&(d-=r.x,c+=r.y),navigator.userAgent.indexOf("Firefox")>=0&&(c+=i.lineHeight-i.fontSize),n.save(),n.translate(d,c),c=0,d=0,n.scale(s,s);for(var f=0;f<a.length;f++)l+=n.measureText(a[f]).width,f!==a.length-1?l>=i.width/s&&(n.fillText(a.substring(h,f),d,c),c+=i.lineHeight,l=0,h=f):n.fillText(a.substring(h,f+1),d,c);n.restore()},_analyseArea:function(e){var t=e.querySelector(".bg"),o=b.getRealStyle(t);return{top:this._toNum(e.style.top),left:this._toNum(e.style.left),width:e.offsetWidth,height:e.offsetHeight,borderColor:o.borderTopColor,bgColor:o.backgroundColor,opacity:parseFloat(o.opacity),icon:this._analyseIcon(e.querySelector("i")),label:this._analyseLabel(e.querySelector("label"))}},renderAreas:function(e,t,o,i){var s=e.getContext("2d");for(var r in t){var n=t[r];n.bgColor=n.bgColor.replace("rgb","rgba").replace(")",", "+n.opacity+")"),n.borderColor=n.borderColor.replace("rgb","rgba").replace(")",", "+n.opacity+")"),s.fillStyle=n.bgColor,s.strokeStyle=n.borderColor,s.rect(n.left,n.top,n.width,n.height),s.fill(),s.stroke(),this._fillIcon(e,n.left-3,n.top-3,n.icon,o,i),this._fillLabel(e,n.left,n.top,n.label,i)}},_analyseMemo:function(e){var t=this._analyseIcon(e.querySelector("i"));t.font="14px "+t.font.split(" ")[1];var o=this._analyseLabel(e.querySelector(".memo_text"));o.font="12px "+o.fontFamily;var i=b.getRealStyle(e);return{top:this._toNum(e.style.top),left:this._toNum(e.style.left),width:e.offsetWidth,height:e.offsetHeight,bgColor:i.color,boxShadow:i.boxShadow,icon:t,label:o}},renderMemos:function(e,t,o){var i=e.getContext("2d");for(var s in t){var r=t[s];i.save(),i.fillStyle=r.bgColor;var n=r.boxShadow.split(") ");i.shadowColor=n[0],n=n[1].split(" "),i.shadowOffsetX=this._toNum(n[0]),i.shadowOffsetY=this._toNum(n[1]),i.shadowBlur=this._toNum(n[2]),i.beginPath(),i.moveTo(r.left+10,r.top),i.lineTo(r.left+r.width,r.top),i.lineTo(r.left+r.width,r.top+r.height),i.lineTo(r.left,r.top+r.height),i.lineTo(r.left,r.top+10),i.lineTo(r.left+10,r.top),i.closePath(),i.fill(),i.restore(),i.save(),i.fillStyle="rgba(0,0,0,0.1)",i.beginPath(),i.moveTo(r.left+10,r.top),i.lineTo(r.left+10,r.top+10),i.lineTo(r.left,r.top+10),i.lineTo(r.left+10,r.top),i.closePath(),i.fill(),i.restore(),i.save(),i.fillStyle=r.icon.color,i.font=r.icon.font,i.textAlign="center",i.textBaseline="middle";var a=r.left+r.width/2,l=r.top+2;i.translate(a,l),i.scale(o,o),0===r.icon.content.indexOf('"')&&(r.icon.content=r.icon.content.split('"')[1]),i.fillText(r.icon.content,0,0),i.restore(),this._fillLabel(e,r.left,r.top,r.label,o)}},_analyseNode:function(e){var t="";M.hasClass(e,"item_ellipse")&&(t="ellipse"),M.hasClass(e,"item_rhomb")&&(t="rhomb"),M.hasClass(e,"item_round")&&(t="round"),M.hasClass(e,"item_parallelogram")&&(t="parallelogram"),M.hasClass(e,"item_custom")&&(t="custom");var o=b.getRealStyle(e),i={top:this._toNum(e.style.top),left:this._toNum(e.style.left),width:e.offsetWidth,height:e.offsetHeight,borderColor:o.borderTopColor,borderWidth:this._toNum(o.borderTopWidth),bgColor:o.backgroundColor,borderRadius:this._toNum(o.borderTopLeftRadius),boxShadow:o.boxShadow,spClass:t,icon:this._analyseIcon(e.querySelector(".ico").childNodes[0])};return M.hasClass(e,"item_round")||M.hasClass(e,"item_rhomb")||M.hasClass(e,"item_custom")?i.label=this._analyseLabel(e.querySelector(".span")):i.label=this._analyseLabel(e.querySelector("td").nextSibling),"custom"===t&&(i.icon.isCustom=!0),i},renderNodes:function(e,t,o,i){var s=e.getContext("2d");for(var r in t){var n=t[r],a=n.boxShadow.split(") ");if(1===a.length){var l=n.boxShadow.split("rgba");a[0]="rgba"+l[1],a[1]=l[0]}"custom"!==n.spClass&&(s.shadowColor=a[0],a=a[1].split(" "),s.shadowOffsetX=this._toNum(a[0])+(n.borderWidth>1?1:0),s.shadowOffsetY=this._toNum(a[1])+(n.borderWidth>1?1:0),s.shadowBlur=this._toNum(a[2])),s.fillStyle=n.bgColor,"ellipse"===n.spClass?s.BezierEllipse(n.left+n.width/2,n.top+n.height/2,n.width/2,n.height/2).fill():"rhomb"===n.spClass?(s.save(),s.translate(n.left+n.width/2,n.top+n.height/2),s.rotate(45*Math.PI/180),s.roundRect(-n.width/2,-n.height/2,n.width-n.borderWidth,n.height-n.borderWidth,n.borderRadius).fill(),s.restore()):"parallelogram"===n.spClass?(s.save(),s.translate(n.left+n.width/2,n.top+n.height/2),s.transform(1,0,-12/n.height,1,0,0),s.roundRect(-n.width/2,-n.height/2,n.width-n.borderWidth,n.height-n.borderWidth,n.borderRadius).fill(),s.restore()):"custom"===n.spClass||s.roundRect(n.left+n.borderWidth/2,n.top+n.borderWidth/2,n.width-n.borderWidth,n.height-n.borderWidth,n.borderRadius).fill(),s.shadowBlur=0,s.shadowColor="",s.shadowOffsetX=0,s.shadowOffsetY=0,s.strokeStyle=n.borderColor,s.lineWidth=0===n.borderWidth?.01:n.borderWidth,s.stroke(),this._fillIcon(e,n.left+(n.borderRadius>6?-3:0),n.top,n.icon,o,i),this._fillLabel(e,n.left,n.top,n.label,i,"rhomb"===n.spClass?{x:n.width/3*1.41,y:n.height/4}:void 0)}},_analyseLine:function(e,t){var o=b.getRealStyle(e).fontFamily,i=t.querySelector("path[stroke-linecap]"),s=i.getAttribute("marker-end"),r={color:i.getAttribute("stroke"),lineWidth:i.getAttribute("stroke-width"),lineCap:"round",noArrow:!s||null==s},n=i.style.strokeDasharray;r.lineDash=n&&null!=n;var a=t.childNodes[2],l=a.getAttribute("fill");l&&null!==l&&""!==l||(l="#777"),r.label={text:a.textContent,font:a.style.fontSize+" "+o,color:l,left:a.getAttribute("x"),top:a.getAttribute("y")};for(var h=i.getAttribute("d"),p=h.substring(2,h.length).split(/[L|Q]/),d=[],c=0;c<p.length;++c){p[c]=p[c].replace(/^\s+|\s+$/gm,"");var f=p[c].split(" ");2===f.length?d.push({x:parseFloat(f[0]),y:parseFloat(f[1])}):d.push({x:parseFloat(f[0]),y:parseFloat(f[1]),dX:parseFloat(f[2]),dY:parseFloat(f[3])})}r.points=d;var u=d.length,m=d[u-1].x-d[u-2].x,g=d[u-1].y-d[u-2].y;return r.angle=Math.atan2(g,m),r},renderLines:function(e,t){var o=e.getContext("2d");for(var i in t){var s=t[i];o.save(),o.setLineDash(s.lineDash?[4,6]:[]),o.strokeStyle=s.color,o.lineWidth=s.lineWidth,o.lineCap=s.lineCap;var r=s.points;o.beginPath(),o.moveTo(r[0].x,r[0].y);for(var n=1;n<r.length;++n)if(r[n].dX){var a=r[n].y===r[n].dY?Math.abs(r[n].x-r[n].dX):Math.abs(r[n].y-r[n].dY);o.arcTo(r[n].x,r[n].y,r[n].dX,r[n].dY,a),o.moveTo(r[n].dX,r[n].dY)}else o.lineTo(r[n].x,r[n].y),n!==r.length-1&&o.moveTo(r[n].x,r[n].y);if(o.closePath(),o.stroke(),s.noArrow||(o.translate(r[r.length-1].x,r[r.length-1].y),o.rotate(s.angle),o.fillStyle=s.color,o.beginPath(),o.moveTo(1*s.lineWidth,0),o.lineTo(-6*s.lineWidth,-3*s.lineWidth),o.lineTo(-6*s.lineWidth,3*s.lineWidth),o.lineTo(1*s.lineWidth,0),o.closePath(),o.fill()),o.restore(),s.label&&null!=s.label.text&&""!=s.label.text){var l=e.getContext("2d"),h=s.label;l.fillStyle=h.color,l.textAlign="center",l.font=h.font,l.fillText(h.text,h.left,h.top)}}}};function oe(e,t,o){try{var i=new Blob([e]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(i,t+"."+o);else{var s=document.createElement("a");s.href=window.URL.createObjectURL(i),s.download=t+"."+o,s.click(),window.URL.revokeObjectURL(s.href)}}catch(i){for(var r=window.open("","_blank");"complete"!==r.document.readyState&&"complete"!==r.document.readyState;);r.document.write("<html><head><title>"+t+"."+o+"</title></head><body><pre>"+("xml"===o?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e)+"</pre></body></html>")}}var ie={flag:"export",initFuncName:"canvasExtend",methods:{canvasExtend:function(){te.canvasExtend()},exportDiagram:function(e){for(var t=void 0,o=null,i={},s=this.$refs.$group.querySelectorAll(".GooFlow_area"),r=0;r<s.length;++r)i[s[r].id]=te._analyseArea(s[r]),i[s[r].id].icon.backgroundImage&&null===o&&(o=i[s[r].id].icon.backgroundImage);for(var n={},a=this.$refs.$paper.querySelectorAll(".GooFlow_memo"),l=0;l<a.length;++l)n[a[l].id]=te._analyseMemo(a[l]);for(var h={},p=this.$refs.$workArea.querySelectorAll(".GooFlow_item"),d=0;d<p.length;++d)h[p[d].id]=te._analyseNode(p[d]),h[p[d].id].icon.backgroundImage&&null===o&&(o=h[p[d].id].icon.backgroundImage);var c=this._suitSize(),f=c.width+100*this.scale,u=c.height+100*this.scale,m=te.initBg(f,u,"#ffffff"),g=this;null!==o&&((t=new Image).setAttribute("crossOrigin","anonymous"),t.src=o);var v=function(){s.length>0&&te.renderAreas(m,i,t,g.scale),a.length>0&&te.renderMemos(m,n,g.scale),te.renderNodes(m,h,t,g.scale);var o=m.getContext("2d");if(o.restore(),window.ActiveXObject||"ActiveXObject"in window||navigator.userAgent.indexOf("Edge")>-1){for(var r={},l=this.$refs.$draw.querySelectorAll("g"),p=0;p<l.length;++p)"GooFlow_tmp_line"!==l[p].getAttribute("tid")&&(r[l[p].id]=te._analyseLine(g.$el,l[p]));te.renderLines(m,r);try{var d=m.msToBlob();navigator.msSaveBlob(d,e+".png")}catch(t){for(var c=m.toDataURL("image/png"),v=window.open("","_blank");"complete"!==v.document.readyState&&"complete"!==v.document.readyState;);v.document.write("<html><head><title>"+e+'.png</title></head><body><img src="'+c+'" border="1" title="'+e+'.png"></body></html>')}}else{var $='<svg xmlns="http://www.w3.org/2000/svg" width="'+f+'" height="'+u+'"><defs><style type="text/css">text{font-size:14px;line-height:1.42857143;font-family:"Microsoft Yahei", "Helvetica Neue", Helvetica, Hiragino Sans GB, WenQuanYi Micro Hei, Arial, sans-serif;}</style></defs>'+g.$refs.$draw.innerHTML+"</svg>",y=new Image;y.src="data:image/svg+xml,"+encodeURIComponent($),y.onload=function(){o.drawImage(y,0,0);var t=document.createElementNS("http://www.w3.org/1999/xhtml","a");t.href=m.toDataURL("image/png"),t.download=e+".png",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}};!t||t.complete||window.ActiveXObject||"ActiveXObject"in window?v():t.onload=function(){v()}},exportDataFile:function(e,t){if("json"===t)oe(S()(this.exportData()),e,"json");else{if("xml"!==t)return;try{oe(this.exportBpmnXML(),e,"xml")}catch(e){console.warn("failed in exec function exportBpmnXML()! you need extend the xml.js plugin for supported.")}}}}},se={name:"DemoSpnode",components:{GooFlow:B},data:function(){return{myProps:{id:"aaaabbb",width:"900",height:"600",haveHead:!0,headLabel:!0,headBtns:["new","open","save","undo","redo","reload","print"],haveTool:!0,useOperStack:!0,haveMulti:!0,haveDirDashed:!0,haveSegment:!0,haveSegDashed:!0,toolBtns:["start round mix","end round mix","task","node capsule","chat parallelogram","state","plug","join rhomb","fork rhomb","complex ellipse mix"],toolTextWidth:60,auth:H},global:O,plugIns:[W,P,R,z,ie]}},methods:{exportDiagram:function(){this.$refs.gooFlow.exportDiagram("myFlow")}},mounted:function(){var e=this.$refs.gooFlow;G.a.get("./static/demo/data3.json",{},{headers:{"Content-Type":"application/json"}}).then(function(t){e.loadData(t.data)}),e.bindOperEvent({onPrintClick:function(){e.print()},onBtnSaveClick:function(){e.exportDiagram("myFlow")}})}},re={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"DemoSpnode"}},[o("goo-flow",{ref:"gooFlow",attrs:{property:e.myProps,global:e.global,plugIns:e.plugIns}},[o("div",{staticStyle:{float:"right","margin-right":"15px"},attrs:{slot:"headerCustom"},slot:"headerCustom"},[e._v("特殊形状的节点 "),o("button",{attrs:{type:"button"},on:{click:function(t){e.exportDiagram()}}},[e._v("导出流程图片")])])])],1)},staticRenderFns:[]};var ne=o("VU/8")(se,re,!1,function(e){o("S3Sd")},null,null).exports,ae={name:"DemoCustom",components:{GooFlow:B},data:function(){return{myProps:{id:"aaaabbb",width:"900",height:"600",haveHead:!0,headLabel:!0,headBtns:["new","open","save","undo","redo","reload","print"],haveTool:!0,useOperStack:!0,haveMulti:!0,haveDirDashed:!0,haveSegment:!0,haveSegDashed:!0,toolBtns:["start round mix","end round mix","huber","router","plug2","complex mix"],nodeCustoms:{huber:{class:"custom_huber",width:102,height:50},router:{class:"custom_router",width:115,height:52}},auth:H},global:O,plugIns:[W,P,R,z,ie]}},methods:{exportDiagram:function(){this.$refs.gooFlow.exportDiagram("myFlow")}},mounted:function(){var e=this.$refs.gooFlow;G.a.get("./static/demo/data3.json",{},{headers:{"Content-Type":"application/json"}}).then(function(t){e.loadData(t.data)}),e.bindOperEvent({onPrintClick:function(){e.print()},onBtnSaveClick:function(){e.exportDiagram("myFlow")}})}},le={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"DemoCustom"}},[o("goo-flow",{ref:"gooFlow",attrs:{property:e.myProps,global:e.global,plugIns:e.plugIns}},[o("div",{staticStyle:{float:"right","margin-right":"15px"},attrs:{slot:"headerCustom"},slot:"headerCustom"},[e._v("自定义背景图节点 "),o("button",{attrs:{type:"button"},on:{click:function(t){e.exportDiagram()}}},[e._v("导出流程图片")])])])],1)},staticRenderFns:[]};var he=o("VU/8")(ae,le,!1,function(e){o("cAeq")},null,null).exports;Object.keys=$.a||function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(o);return t};var pe={flag:"multi",prop:{$multiNodes:{},$multiLines:{},$multiKey:"shift"},events:{onBatchAdd:null,onBatchDel:null,onBatchMove:null,onBatchMark:null},methods:{_isMultiKey:function(e){return!(!e.shiftKey||"shift"!==this.prop.$multiKey)||!(!e.ctrlKey||"ctrl"!==this.prop.$multiKey)},_wallAllMulti:function(){if(this.prop.$multiNodes&&this.prop.$multiLines){if(0===$()(this.prop.$multiNodes).length&&0===$()(this.prop.$multiLines).length)return this.$refs.$multiGhost.hide(),void this.$refs.$multiOper.hide();var e=0,t=0,o=-1,i=-1;for(var s in this.prop.$multiNodes){var r=this.prop.$nodes[s];(-1===o||r.left<o)&&(o=r.left),(-1===i||r.top<i)&&(i=r.top),r.width+r.left>e&&(e=r.width+r.left),r.height+r.top>t&&(t=r.height+r.top)}for(var n in this.prop.$multiLines){var a=this.prop.$lines[n],l=document.getElementById(n),h=l.getAttribute("from").split(","),p=[];p[0]=parseFloat(h[0]),p[1]=parseFloat(h[1]);var d=l.getAttribute("to").split(","),c=[];c[0]=parseFloat(d[0]),c[1]=parseFloat(d[1]),"sl"===a.type||("tb"===a.type?(p[1]=a.M,c[1]=a.M):"lr"===a.type&&(p[0]=a.M,c[0]=a.M)),(-1===o||p[0]<o)&&(o=p[0]),(-1===o||c[0]<o)&&(o=c[0]),(-1===i||p[1]<i)&&(i=p[1]),(-1===i||c[1]<i)&&(i=c[1]),p[0]>e&&(e=p[0]),c[0]>e&&(e=c[0]),p[1]>t&&(t=p[1]),c[1]>t&&(t=c[1])}this.$refs.$multiGhost.show({left:o-2+"px",top:i-2+"px",width:e-o+4+"px",height:t-i+4+"px"}),this.$refs.$multiOper.show({left:e+4+"px",top:i-2+"px"})}},_addtoMultiList:function(e,t,o){var i=null;"node"===t?(this.prop.$multiNodes[e]=e,i=document.getElementById(e),M.addClass(i,"item_focus"),i.style.borderColor=this.GooFlow.color.line):"line"===t&&(this.prop.$multiLines[e]=e,(i=document.getElementById(e).querySelector("path[stroke-linecap='round']")).setAttribute("stroke","#ff8800"),this.prop.$lines[e].noArrow||i.setAttribute("marker-end","url(#arrow2)")),o&&this._wallAllMulti()},_removeFromMultiList:function(e,t,o){var i=null,s=null;if("node"===t){delete this.prop.$multiNodes[e],i=document.getElementById(e),M.removeClass(i,"item_focus"),s=this.prop.$nodes[e];var r=this.prop.$nodeTypeMap[s.type]||s.type;s.marked?(M.addClass(i,"item_mark"),i.style.borderColor=this.GooFlow.color.mark):r.indexOf(" mix")>0?i.style.borderColor=this.GooFlow.color.mix:this.prop.$nodeCustoms[r]?i.style.borderColor="transparent":i.style.borderColor=this.prop.$nodes[e].color||this.GooFlow.color.node}else"line"===t&&(delete this.prop.$multiLines[e],s=this.prop.$lines[e],i=document.getElementById(e).querySelector("path[stroke-linecap='round']"),s.marked||(i.setAttribute("stroke",s.color||this.GooFlow.color.line),s.noArrow||i.setAttribute("marker-end","url(#arrow1)")));o&&this._wallAllMulti()},_clearMultiList:function(){for(var e in this.prop.$multiNodes)this._removeFromMultiList(e,"node");for(var t in this.prop.$multiLines)this._removeFromMultiList(t,"line");this._wallAllMulti()},_initMultiSelect:function(e){var t=this;t.prop.$multiKey=e,this.$refs.$workArea.addEventListener("mousedown",function(e){var o={X:0,Y:0};if("cursor"===t.prop.$nowType){if(t._isMultiKey(e))return!1;if(t.$refs.$multiGhost.inShow()){if(0===$()(t.prop.$multiLines).length&&0===$()(t.prop.$multiNodes).length)return void t._wallAllMulti();var i=t.$refs.$multiGhost.position(),s=t.$refs.$multiGhost.offsetSize();if(!((o=b.getCoor(e,this)).X<i.left||o.X>i.left+s.width||o.Y<i.top||o.Y>i.top+s.height))return s.left=i.left,s.top=i.top,void t._bindMoveEvent(e,s,function(e,t,o,i,r){e&&t.batchMove(t.prop.$multiNodes,t.prop.$multiLines,i-s.left,r-s.top),t._wallAllMulti()});var r=e.target,n=r.tagName;if(!("svg"===n||"DIV"===n&&r.className.indexOf("GooFlow_work")>-1||"LABEL"===n))return;t.$refs.$multiGhost.show({left:o.X+"px",top:o.Y+"px",width:"0px",height:"0px"}),t.$refs.$multiOper.hide()}else{var a=e.target,l=a.tagName;if(!("svg"===l||"DIV"===l&&a.className.indexOf("GooFlow_work")>-1||"LABEL"===l))return;o=b.getCoor(e,this),t.$refs.$multiGhost.show({left:o.X+"px",top:o.Y+"px",width:"0",height:"0"}),t.$refs.$multiOper.hide()}var h=!1;document.onmousemove=function(e){e||(e=window.event);var i=b.getCoor(e,t.$refs.$workArea),s=i.X-o.X,r=i.Y-o.Y,n=t.$refs.$multiGhost.position();s<0&&(n.left=o.X+s,s*=-1),r<0&&(n.top=o.Y+r,r*=-1),h=!0,t.$refs.$multiGhost.css({left:n.left+"px",top:n.top+"px",width:s+"px",height:r+"px"})},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null;var o=t.$refs.$multiGhost.position(),i=t.$refs.$multiGhost.offsetSize(),s=o.left,r=o.top,n=i.width,a=i.height;""!==t.prop.$focus&&t.blurItem(!1),t._clearMultiList(),h&&(t.$nextTick(function(){for(var e in t.prop.$nodes){var o=t.prop.$nodes[e],i={left:o.left*t.scale,top:o.top*t.scale,right:(o.left+o.width)*t.scale,bottom:(o.top+o.height)*t.scale};if(!(i.left>=s&&i.left<=s+n||i.right>=s&&i.right<=s+n)||!(i.top>=r&&i.top<=r+a||i.bottom>=r&&i.bottom<=r+a))if(!(i.left<=s&&i.right>=s+n&&(r<=i.top&&r+a>=i.top||r<=i.bottom&&r+a>=i.bottom))&&!(i.top<=r&&i.bottom>=r+a&&(s<=i.left&&s+n>=i.left||s<=i.right&&s+n>=i.right)))continue;t._addtoMultiList(e,"node")}for(var l in t.prop.$lines){var h,p,d=t.prop.$lines[l],c=void 0,f=document.getElementById(l),u=f.getAttribute("from").split(","),m=[];m[0]=parseFloat(u[0]),m[1]=parseFloat(u[1]);var g=f.getAttribute("to").split(","),v=[];v[0]=parseFloat(g[0]),v[1]=parseFloat(g[1]),"sl"===d.type||("tb"===d.type?(m[1]=d.M,v[1]=d.M):"lr"===d.type&&(m[0]=d.M,v[0]=d.M)),h=m[0]>=s&&m[0]<=s+n&&m[1]>=r&&m[1]<=r+a,p=v[0]>=s&&v[0]<=s+n&&v[1]>=r&&v[1]<=r+a,(h||p||("tb"===d.type?c=r<=v[1]&&v[1]<=r+a&&(m[0]<=s&&v[0]>=s+n||v[0]<=s&&m[0]>=s+n):"lr"===d.type&&(c=s<=v[0]&&v[0]<=s+n&&(m[1]<=r&&v[1]>=r+a||v[1]<=r&&m[1]>=r+a)),c))&&t._addtoMultiList(l,"line")}t._wallAllMulti()}),b.stopEventPop(e))}}})},batchMarkItem:function(e,t,o){if("function"!=typeof this.onBatchMark||!1!==this.onBatchMark(e,t,o)){if("object"===(void 0===e?"undefined":u()(e))&&"number"==typeof e.length&&e.length>0)for(var i=0;i<e.length;++i)this.markItem(e[i],o,!1,!0,!0);if("object"===(void 0===t?"undefined":u()(t))&&"number"==typeof t.length&&t.length>0)for(var s=0;s<t.length;++s)this.markItem(t[s],o,!1,!0,!0);"function"==typeof this.pushOper&&this.pushOper("batchMarkItem",[e,t,o]),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},batchAddItem:function(e,t){if("function"!=typeof this.onBatchAdd||!1!==this.onBatchAdd(e,t)){var o=[],i=[];for(var s in e)this.addNode(s,e[s],!1,!0,!0),i.push(s);for(var r in t)this.addLine(r,t[r],!1,!0,!0),o.push(r);"function"==typeof this.pushOper&&this.prop.$editable&&this.pushOper("batchDelete",[i,o]),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},batchDelete:function(e,t){if("function"!=typeof this.onBatchDel||!1!==this.onBatchDel(e,t)){var o={},i={};if("object"===(void 0===e?"undefined":u()(e))&&"number"==typeof e.length&&e.length>0)for(var s=0;s<e.length;++s)if(this.prop.$nodes[e[s]]&&null!=this.prop.$nodes[e[s]]){for(var r in i[e[s]]=JSON.parse(S()(this.prop.$nodes[e[s]])),this.prop.$lines)this.prop.$lines[r].from!==e[s]&&this.prop.$lines[r].to!==e[s]||(o[r]=JSON.parse(S()(this.prop.$lines[r])),this.delLine(r,!1,!0,!0),this.prop.$multiLines&&delete this.prop.$multiLines[r]);this.delNode(e[s],!1,!0,!0),this.prop.$multiNodes&&delete this.prop.$multiNodes[e[s]]}if("object"===(void 0===t?"undefined":u()(t))&&"number"==typeof t.length&&t.length>0)for(var n=0;n<t.length;++n)this.prop.$lines[t[n]]&&null!=this.prop.$lines[t[n]]&&(o[t[n]]=JSON.parse(S()(this.prop.$lines[t[n]])),this.delLine(t[n],!1,!0,!0),this.prop.$multiLines&&delete this.prop.$multiLines[t[n]]);"function"==typeof this.pushOper&&this.prop.$editable&&this.pushOper("batchAddItem",[i,o]),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},batchMove:function(e,t,o,i){if(!(0===$()(e).length&&0===$()(t).length||"number"!=typeof o||"number"!=typeof i||"function"==typeof this.onBatchMove&&!1===this.onBatchMove(e,t,o,i))){var s={},r={};if("object"===(void 0===e?"undefined":u()(e)))for(var n in e){var a=this.prop.$nodes[n];a&&null!=a&&(this.moveNode(n,a.left+o,a.top+i,!1,!0,!0),s[n]=n)}if("object"===(void 0===t?"undefined":u()(t)))for(var l in t){var h=this.prop.$lines[l];if(h&&null!=h&&("lr"===h.type||"tb"===h.type)){h.Ml="lr"===h.type?i+h.Ml:o+h.Ml,h.Mr="lr"===h.type?i+h.Mr:o+h.Mr;var p="lr"===h.type?o+h.M:i+h.M;h.M=-1,this.setLineM(l,p,!0,!1,!0),r[l]=l}}"function"==typeof this.pushOper&&this.prop.$editable&&this.pushOper("batchMove",[s,r,-1*o,-1*i]),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}}}},de={name:"DemoMulti",components:{GooFlow:B},data:function(){return{myProps:{id:"multi_demo",width:"900",height:"600",haveHead:!0,headLabel:!0,headBtns:["new","open","save","undo","redo","reload","print"],haveTool:!0,useOperStack:!0,haveMulti:!0,haveDirDashed:!0,haveSegment:!0,haveSegDashed:!0,toolBtns:["start round mix","end round","task","node","chat","state","plug","join","fork","complex mix"],toolTextWidth:60,multiKey:"ctrl",auth:H},global:O,plugIns:[W,P,R,z,pe]}},mounted:function(){var e=this.$refs.gooFlow;G.a.get("./static/demo/data2.json",{},{headers:{"Content-Type":"application/json"}}).then(function(t){e.loadData(t.data)}),e.bindOperEvent({onPrintClick:function(){e.print()}})}},ce={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"DemoMulti"}},[t("goo-flow",{ref:"gooFlow",attrs:{property:this.myProps,global:this.global,plugIns:this.plugIns}},[t("div",{staticStyle:{float:"right","margin-right":"15px"},attrs:{slot:"headerCustom"},slot:"headerCustom"},[this._v("多选实验")])])],1)},staticRenderFns:[]};var fe=o("VU/8")(de,ce,!1,function(e){o("2JhT")},null,null).exports,ue={canvasExtend:function(){ee()},_toNum:function(e){return null!==e&&""!==e?parseInt(e.split("px")[0],10):void 0},_analyseArea:function(e){var t=e.querySelector(".bg"),o=b.getRealStyle(t);return{top:this._toNum(e.style.top),left:this._toNum(e.style.left),width:e.offsetWidth,height:e.offsetHeight,borderColor:o.borderTopColor,bgColor:o.backgroundColor,opacity:parseFloat(o.opacity)}},renderAreas:function(e,t,o){for(var i in t){var s=t[i];e.save(),s.bgColor=s.bgColor.replace("rgb","rgba").replace(")",", "+s.opacity+")"),s.borderColor=s.borderColor.replace("rgb","rgba").replace(")",", "+s.opacity+")"),e.fillStyle=s.bgColor,e.strokeStyle=s.borderColor,e.beginPath(),e.rect(s.left*o,s.top*o,s.width*o,s.height*o),e.fill(),e.stroke(),e.closePath(),e.restore()}},_analyseMemo:function(e,t){var o=b.getRealStyle(e);return{top:this._toNum(e.style.top)*t,left:this._toNum(e.style.left)*t,width:e.offsetWidth*t,height:e.offsetHeight*t,bgColor:o.color}},renderMemos:function(e,t){for(var o in t){var i=t[o];e.save(),e.fillStyle=i.bgColor,e.beginPath(),e.moveTo(i.left+5,i.top),e.lineTo(i.left+i.width,i.top),e.lineTo(i.left+i.width,i.top+i.height),e.lineTo(i.left,i.top+i.height),e.lineTo(i.left,i.top+5),e.lineTo(i.left+5,i.top),e.closePath(),e.fill(),e.restore(),e.save(),e.fillStyle="rgba(0,0,0,0.1)",e.beginPath(),e.moveTo(i.left+5,i.top),e.lineTo(i.left+5,i.top+5),e.lineTo(i.left,i.top+5),e.lineTo(i.left+5,i.top),e.closePath(),e.fill(),e.restore()}},_analyseNode:function(e,t){var o="";M.hasClass(e,"item_ellipse")&&(o="ellipse"),M.hasClass(e,"item_rhomb")&&(o="rhomb"),M.hasClass(e,"item_round")&&(o="round"),M.hasClass(e,"item_parallelogram")&&(o="parallelogram"),M.hasClass(e,"item_custom")&&(o="custom");var i=b.getRealStyle(e),s={top:this._toNum(e.style.top)*t,left:this._toNum(e.style.left)*t,width:e.offsetWidth*t,height:e.offsetHeight*t,borderColor:i.borderTopColor,borderWidth:this._toNum(i.borderTopWidth)*t,bgColor:i.backgroundColor,borderRadius:this._toNum(i.borderTopLeftRadius),spClass:o};return"custom"===o&&(s.borderColor="#999999"),s},renderNodes:function(e,t){for(var o in e.save(),t){var i=t[o];e.fillStyle=i.bgColor,"ellipse"===i.spClass?e.BezierEllipse(i.left+i.width/2,i.top+i.height/2,i.width/2,i.height/2).fill():"rhomb"===i.spClass?(e.save(),e.translate(i.left+i.width/2,i.top+i.height/2),e.rotate(45*Math.PI/180),e.roundRect(-i.width/2,-i.height/2,i.width-i.borderWidth,i.height-i.borderWidth,i.borderRadius).fill(),e.restore()):"parallelogram"===i.spClass?(e.save(),e.translate(i.left+i.width/2,i.top+i.height/2),e.transform(1,0,-12/i.height,1,0,0),e.roundRect(-i.width/2,-i.height/2,i.width-i.borderWidth,i.height-i.borderWidth,i.borderRadius).fill(),e.restore()):"custom"===i.spClass?(e.save(),e.strokeStyle=i.borderColor,e.lineCap="round",e.roundRect(i.left,i.top,i.width,i.height,i.borderRadius).stroke(),e.beginPath(),e.moveTo(i.left+2,i.top+2),e.lineTo(i.left+i.width-2,i.top+i.height-2),e.moveTo(i.left+2,i.top+i.height-2),e.lineTo(i.left+i.width-2,i.top+2),e.closePath(),e.stroke(),e.restore()):e.roundRect(i.left,i.top,i.width,i.height,i.borderRadius).fill(),"custom"!==i.spClass&&(e.strokeStyle=i.borderColor,e.lineWidth=0!==i.borderWidth?i.borderWidth:.1,e.stroke())}e.restore()},_analyseLine:function(e,t){var o=e.querySelector("path[stroke-linecap]"),i=o.getAttribute("marker-end"),s={color:o.getAttribute("stroke"),lineWidth:o.getAttribute("stroke-width")*t,lineCap:"round",noArrow:!i||null==i},r=o.style.strokeDasharray;s.lineDash=r&&null!=r;for(var n=o.getAttribute("d"),a=n.substring(2,n.length).split(/[L|Q]/),l=[],h=0;h<a.length;++h){a[h]=a[h].replace(/^\s+|\s+$/gm,"");var p=a[h].split(" ");2===p.length?l.push({x:parseFloat(p[0])*t,y:parseFloat(p[1])*t}):l.push({x:parseFloat(p[0])*t,y:parseFloat(p[1])*t,dX:parseFloat(p[2])*t,dY:parseFloat(p[3])*t})}s.points=l;var d=l.length,c=l[d-1].x-l[d-2].x,f=l[d-1].y-l[d-2].y;return s.angle=Math.atan2(f,c),s},renderLines:function(e,t){for(var o in t){var i=t[o];e.save(),e.setLineDash(i.lineDash?[2,3]:[]),e.strokeStyle=i.color,e.lineWidth=i.lineWidth,e.lineCap=i.lineCap;var s=i.points;e.beginPath(),e.moveTo(s[0].x,s[0].y);for(var r=1;r<s.length;++r)if(s[r].dX){var n=s[r].y===s[r].dY?Math.abs(s[r].x-s[r].dX):Math.abs(s[r].y-s[r].dY);e.arcTo(s[r].x,s[r].y,s[r].dX,s[r].dY,n),e.moveTo(s[r].dX,s[r].dY)}else e.lineTo(s[r].x,s[r].y),r!==s.length-1&&e.moveTo(s[r].x,s[r].y);e.closePath(),e.stroke(),i.noArrow||(e.translate(s[s.length-1].x,s[s.length-1].y),e.rotate(i.angle),e.fillStyle=i.color,e.beginPath(),e.moveTo(1*i.lineWidth,0),e.lineTo(-6*i.lineWidth,-3*i.lineWidth),e.lineTo(-6*i.lineWidth,3*i.lineWidth),e.lineTo(1*i.lineWidth,0),e.closePath(),e.fill()),e.restore()}},_clearMap:function(e){e.getContext("2d").clearRect(0,0,parseInt(e.getAttribute("width")),parseInt(e.getAttribute("height")));var t=e.nextSibling;t&&null!=t&&"viewbox"===t.className&&(t.style.top=0,t.style.left=0,t.style.width="100%",t.style.height="100%")}},me={flag:"navmap",initFuncName:"canvasExtend",methods:{canvasExtend:function(){ue.canvasExtend()},_locateViewBox:function(e){var t=this.prop.$navMap.querySelector(".viewbox"),o=this.$refs.$workArea.parentNode,i=o.scrollLeft*e,s=o.scrollTop*e;t.style.left=i+"px",t.style.top=s+"px",t.style.width=o.clientWidth*e+"px",t.style.height=o.clientHeight*e+"px"},refreshMap:function(){var e=this.prop.$navMap.querySelector("canvas"),t=e.getContext("2d");ue._clearMap(e);var o=this._buildWorkSize();if(o.haveData){var i=e.width/o.width>e.height/o.height?e.height/o.height:e.width/o.width;this.prop.$navMap.setAttribute("scale",""+i);for(var s={},r=this.$refs.$group.querySelectorAll(".GooFlow_area"),n=0;n<r.length;++n)s[r[n].id]=ue._analyseArea(r[n]);ue.renderAreas(t,s,i);for(var a={},l=this.$refs.$paper.querySelectorAll(".GooFlow_memo"),h=0;h<l.length;++h)a[l[h].id]=ue._analyseMemo(l[h],i);ue.renderMemos(t,a);for(var p={},d=this.$refs.$workArea.querySelectorAll(".GooFlow_item"),c=0;c<d.length;++c)p[d[c].id]=ue._analyseNode(d[c],i);ue.renderNodes(t,p);for(var f={},u=this.$refs.$draw.querySelectorAll("g"),m=0;m<u.length;++m)"GooFlow_tmp_line"!==u[m].getAttribute("tid")&&(f[u[m].id]=ue._analyseLine(u[m],i));ue.renderLines(t,f),this._locateViewBox(i)}},_initNavMap:function(e){if(e&&null!=e&&""!==e)if(this.prop.$navMap=document.querySelector(e),this.prop.$navMap&&null!=this.prop.$navMap){var t=this.prop.$navMap.clientWidth,o=this.prop.$navMap.clientHeight;this.prop.$navMap.className="GooFlow_nav_map",this.prop.$navMap.style.width=t+"px",this.prop.$navMap.style.height=o+"px",this.prop.$navMap.setAttribute("unselectable","on"),this.prop.$navMap.setAttribute("onselectstart","return false"),this.prop.$navMap.setAttribute("onselect","document.selection.empty()");var i=document.createElement("canvas");i.className="map",i.width=t,i.height=o,this.prop.$navMap.appendChild(i),(window.ActiveXObject||"ActiveXObject"in window||navigator.userAgent.indexOf("Edge")>-1)&&(i=window.G_vmlCanvasManager.initElement(i));var s=document.createElement("div");s.className="viewbox",this.prop.$navMap.appendChild(s);var r=this;this.$refs.$workArea.parentNode.addEventListener("scroll",function(e){r._locateViewBox(parseFloat(r.prop.$navMap.getAttribute("scale")))}),this.prop.$navMap.querySelector(".viewbox").addEventListener("mousedown",function(e){this.parentNode.setAttribute("isDown","1");var t=b.mouseP(e),o=r.$refs.$workArea.parentNode,i=t.x,s=t.y,n=o.scrollLeft,a=o.scrollTop,l=parseFloat(this.parentNode.getAttribute("scale"));document.onmousemove=function(e){if("1"===r.prop.$navMap.getAttribute("isDown")){e||(e=window.event);var t=b.mouseP(e);if(i===t.x&&s===t.y)return!1;o.scrollLeft=n+(t.x-i)/l,o.scrollTop=a+(t.y-s)/l}},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,r.prop.$navMap.removeAttribute("isDown")}})}else delete this.prop.$navMap}}},ge={name:"DemoNavmap",components:{GooFlow:B},data:function(){return{myProps:{id:"aaaabbb",width:"800",height:"500",haveHead:!0,headLabel:!0,headBtns:["new","open","save","undo","redo","reload","print"],haveTool:!0,useOperStack:!0,haveMulti:!0,haveDirDashed:!0,haveSegment:!0,haveSegDashed:!0,toolBtns:["huber","router","plug2","complex mix"],nodeCustoms:{huber:{class:"custom_huber",width:102,height:50},router:{class:"custom_router",width:115,height:52}},auth:H},global:O,plugIns:[W,P,R,z,ie,me]}},methods:{exportDiagram:function(){this.$refs.gooFlow.exportDiagram("myFlow")}},mounted:function(){var e=this.$refs.gooFlow;G.a.get("./static/demo/child.json",{},{headers:{"Content-Type":"application/json"}}).then(function(t){e.loadData(t.data)}),e.bindOperEvent({onPrintClick:function(){e.print()},onBtnSaveClick:function(){e.exportDiagram("myFlow")}})}},ve={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"DemoNavmap"}},[t("div",{staticStyle:{float:"left",width:"800px"}},[t("goo-flow",{ref:"gooFlow",attrs:{property:this.myProps,global:this.global,plugIns:this.plugIns,navSelector:"#demo_navmap"}},[t("div",{staticStyle:{float:"right","margin-right":"15px"},attrs:{slot:"headerCustom"},slot:"headerCustom"},[this._v("实时的缩略导航图")])])],1),t("div",{staticStyle:{float:"left",width:"280px",border:"1px solid #999"}},[t("keep-alive",[t("div",{staticStyle:{height:"180px"},attrs:{id:"demo_navmap"}})])],1)])},staticRenderFns:[]};var $e=o("VU/8")(ge,ve,!1,function(e){o("WtsI")},null,null).exports,ye={name:"DemoExport",components:{GooFlow:B},data:function(){return{myProps:{id:"multi_demo",width:"900",height:"600",haveHead:!0,headLabel:!0,headBtns:["new","open","save","undo","redo","reload","print"],haveTool:!0,useOperStack:!0,haveMulti:!0,haveDirDashed:!0,haveSegment:!0,haveSegDashed:!0,toolBtns:["start round mix","end round","task","node","chat","state","plug","join","fork","complex mix"],toolTextWidth:60,auth:H},global:O,plugIns:[W,P,R,z,ie]}},methods:{exportDiagram:function(){this.$refs.gooFlow.exportDiagram("myFlow")}},mounted:function(){var e=this.$refs.gooFlow;G.a.get("./static/demo/data2.json",{},{headers:{"Content-Type":"application/json"}}).then(function(t){e.loadData(t.data)}),e.bindOperEvent({onPrintClick:function(){e.print()},onBtnSaveClick:function(){e.exportDiagram("myFlow")}})}},we={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"DemoExport"}},[o("goo-flow",{ref:"gooFlow",attrs:{property:e.myProps,global:e.global,plugIns:e.plugIns}},[o("div",{staticStyle:{float:"right","margin-right":"15px"},attrs:{slot:"headerCustom"},slot:"headerCustom"},[o("button",{attrs:{type:"button"},on:{click:function(t){e.exportDiagram()}}},[e._v("导出流程图片")])])])],1)},staticRenderFns:[]};var be=o("VU/8")(ye,we,!1,function(e){o("1z3s")},null,null).exports,xe="  ",ke=xe+xe,Me=ke+xe,_e='<?xml version="1.0" encoding="UTF-8"?>\n<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"\n'+xe+'xmlns:activiti="http://activiti.org/bpmn"\n'+xe+'xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n'+xe+'targetNamespace="${targetNamespace}"\n'+xe+'xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL\n'+xe+'http://www.omg.org/spec/BPMN/2.0/20100501/BPMN20.xsd">\n';function Ce(e,t,o){var i=o.left+","+o.top+","+o.width+","+o.height;return ke+"<"+t+' id="'+e+'" g="'+i+'"'}function Se(e,t,o,i){var s=(i?"":"\n")+o+"<"+e,r="",n="",a=!1;for(var l in t)"object"===u()(t[l])?n+=Se(l,t[l],o+xe):"text"===l?(n+=t[l],a=!0):r+=" "+l+'="'+t[l]+'"';return""===n||a||(n+="\n"+o),s+=r+(""===n?"/>":">"+n+"</"+e+">")}function Ne(e,t){for(var o=0;o<e.attributes.length;++o){var i=e.attributes[o];"id"!==i.nodeName&&(t[i.nodeName]=(s=i.nodeValue,!isNaN(parseFloat(s))&&isFinite(s)?parseFloat(s):"true"===s||"false"!==s&&s))}var s;if(1===e.childNodes.length&&"string"==typeof e.childNodes[0].data)t.text=e.childNodes[0].data;else for(var r=0;r<e.childNodes.length;++r){var n=e.childNodes[r];"string"!=typeof n.data&&(t[n.tagName]={},Ne(n,t[n.tagName]))}}var Ie={flag:"xml",methods:{exportBpmnXML:function(e){void 0===e&&(e={});var t=_e.replace("${targetNamespace}",this.prop.$extra.targetNamespace||"Examples");for(var o in this.prop.$extra)if("targetNamespace"!==o&&"id"!==o){var i=this.prop.$extra[o];"object"===(void 0===i?"undefined":u()(i))?t+=Se(o,i,xe,!0)+"\n":t+=xe+"<"+o+">"+i+"</"+o+">\n"}var s=this.prop.$extra.id||"myProcess",r=this.prop.$title||"My Process";for(var n in t+=xe+"<initNum>"+this.prop.$max+"</initNum>\n",t+=xe+'<process id="'+s+'" name="'+r+'">\n',this.prop.$areas){var a=this.prop.$areas[n];t+=Ce(n,"swimlane",a),t+=' name="'+n+'" title="'+a.name+'"';var l="";for(var h in a)"left"!==h&&"top"!==h&&"width"!==h&&"height"!==h&&"name"!==h&&("object"===u()(a[h])?l+=Se(h,a[h],Me):t+=" "+h+'="'+a[h]+'"');t+=""===l?"/>\n":">"+l+"\n"+ke+"</swimlane>\n"}for(var p in this.prop.$memos){var d=this.prop.$memos[p];t+=Ce(p,"memo",d),t+=">"+d.text+"\n"+ke+"</memo>\n"}for(var c in this.prop.$nodes){var f=this.prop.$nodes[c],m=e[f.type]||f.type;t+=Ce(c,m,f);var g="";for(var v in f)"left"===v||"top"===v||"width"===v||"height"===v||"type"===v||("areaId"===v&&null!=f.areaId?t+=' swimlane="'+f.areaId+'"':"object"===u()(f[v])?g+=Se(v,f[v],Me):t+=" "+v+'="'+f[v]+'"');t+=""===g?"/>\n":">"+g+"\n"+ke+"</"+m+">\n"}for(var $ in this.prop.$lines){var y=this.prop.$lines[$];t+=ke+'<sequenceFlow id="'+$+'" sourceRef="'+y.from+'" targetRef="'+y.to+'"';var w="";for(var b in y)"from"!==b&&"to"!==b&&("object"===u()(y[b])?w+=Se(b,y[b],Me):t+=" "+b+'="'+y[b]+'"');t+=""===w?"/>\n":">"+w+"\n"+ke+"</sequenceFlow>\n"}return t+=xe+"</process>\n</definitions>"},loadBpmnXML:function(e,t){void 0===t&&(t={});var o={extra:{}};if("string"==typeof e){var i=e;window.ActiveXObject||"ActiveXObject"in window||navigator.userAgent.indexOf("Edge")>-1?(e=new ActivexObject("MSXML2.DOMDocument")).loadXML(i):e=(new DOMParser).parseFromString(i,"text/xml")}var s=e.getElementsByTagName("definitions")[0];o.extra.targetNamespace=s.getAttribute("targetNamespace");for(var r=0;r<s.childNodes.length;r++){var n=s.childNodes[r];if("string"!=typeof n.data){var a=n.tagName;if("process"!==a){if("initNum"===a){o.initNum=parseInt(n.textContent,10);continue}o.extra[a]={},n.childNodes.length>0&&"string"==typeof n.childNodes[0].data?o.extra[a]=n.childNodes[0].data:Ne(n,o.extra[a])}else{o.extra.id=n.getAttribute("id"),o.title=n.getAttribute("name"),o.lines={},o.nodes={},o.areas={};for(var l=0;l<n.childNodes.length;++l){var h=n.childNodes[l];if("string"!=typeof h.data){var p=h.tagName,d=h.getAttribute("id");if("swimlane"===p){o.areas[d]={},Ne(h,o.areas[d]),delete o.areas[d].id,o.areas[d].name=o.areas[d].title,delete o.areas[d].title;var c=o.areas[d].g.split(",");delete o.areas[d].g,o.areas[d].left=parseFloat(c[0]),o.areas[d].top=parseFloat(c[1]),o.areas[d].width=parseFloat(c[2]),o.areas[d].height=parseFloat(c[3])}else if("memo"===p){"object"!==u()(o.memos)&&(o.memos={}),o.memos[d]={},Ne(h,o.memos[d]),delete o.memos[d].id;var f=o.memos[d].g.split(",");delete o.memos[d].g,o.memos[d].left=parseFloat(f[0]),o.memos[d].top=parseFloat(f[1]),o.memos[d].width=parseFloat(f[2]),o.memos[d].height=parseFloat(f[3])}else if("sequenceFlow"===p)o.lines[d]={},Ne(h,o.lines[d]),delete o.lines[d].id,o.lines[d].from=o.lines[d].sourceRef,o.lines[d].to=o.lines[d].targetRef,delete o.lines[d].sourceRef,delete o.lines[d].targetRef;else{o.nodes[d]={},Ne(h,o.nodes[d]),delete o.nodes[d].id,void 0!==o.nodes[d].swimlane&&(o.nodes[d].areaId=o.nodes[d].swimlane,delete o.nodes[d].swimlane);var m=o.nodes[d].g.split(",");delete o.nodes[d].g,o.nodes[d].left=parseFloat(m[0]),o.nodes[d].top=parseFloat(m[1]),o.nodes[d].width=parseFloat(m[2]),o.nodes[d].height=parseFloat(m[3]),o.nodes[d].type=t[h.tagName]||h.tagName}}}}}}this.loadData(o)}}},Ae={name:"DemoXml",components:{GooFlow:B},data:function(){return{myProps:{id:"aaaabbb",width:"900",height:"600",haveHead:!0,headLabel:!0,headBtns:["new","open","save","undo","redo","reload","print"],haveTool:!0,useOperStack:!0,haveMulti:!0,haveDirDashed:!0,haveSegment:!0,haveSegDashed:!0,toolBtns:["start round mix","end round","task","node","chat","state","plug","join","fork","complex mix"],toolTextWidth:60,auth:H},global:O,plugIns:[W,P,R,z,ie,Ie]}},methods:{DownloadFile:function(e,t){this.$refs.gooFlow.exportDataFile(e,t)},exportXml:function(){document.getElementById("xmlResult").value=this.$refs.gooFlow.exportBpmnXML({"start round mix":"startEvent","end round mix":"endEvent"})},loadXmlAjax:function(){var e=this.$refs.gooFlow;G.a.get("./static/demo/data2.xml",{}).then(function(t){e.loadBpmnXML(t.data,{startEvent:"start round mix",endEvent:"end round mix"})})}},mounted:function(){this.loadXmlAjax()}},Te={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"DemoXml"}},[o("goo-flow",{ref:"gooFlow",attrs:{property:e.myProps,global:e.global,plugIns:e.plugIns}},[o("div",{staticStyle:{float:"right","margin-right":"15px"},attrs:{slot:"headerCustom"},slot:"headerCustom"},[o("button",{attrs:{type:"button"},on:{click:function(t){e.loadXmlAjax()}}},[e._v("AJAX载入XML数据")]),o("button",{attrs:{type:"button"},on:{click:function(t){e.exportXml()}}},[e._v("导出XML数据")]),o("button",{attrs:{type:"button"},on:{click:function(t){e.DownloadFile("flowJson","json")}}},[e._v("下载JSON")]),o("button",{attrs:{type:"button"},on:{click:function(t){e.DownloadFile("flowXml","xml")}}},[e._v("下载XML")])])]),o("textarea",{staticStyle:{width:"900px",height:"300px"},attrs:{id:"xmlResult",readonly:""}})],1)},staticRenderFns:[]};var De=o("VU/8")(Ae,Te,!1,function(e){o("Egef")},null,null).exports,Fe={flag:"dragadd",methods:{_initDragAddOper:function(){if(this.prop.$editable&&this.$refs.$tool){var e=this;k(this.$refs.$tool.$el,"mousedown","li",{},function(t,o){var i=o.getAttribute("type"),s=o.title;if(e.prop.$dragAddOper&&"cursor"!==i&&"multi"!==i&&!b.isDrawingLine(i)){var r="",n=b.getCoor(t,e.$refs.$workArea),a=e.prop.$nodeCustoms[i],l={width:104,height:26,type:i,title:null!=s&&""!==s?s:"--------",left:n.X,top:n.Y,canOver:!0};if(void 0!==a&&null!=a){a.width&&(l.width=a.width),a.height&&(l.height=a.height);var h='<i class="'+a.class+'" style="width:'+l.width+"px;height:"+l.height+'px;"></i>';r='<table cellspacing="0" style="width:'+l.width*e.scale+"px;height:"+l.height*e.scale+'px;margin:-1px"><tr><td class="ico">'+h+"</td></tr></table>"}else l.type.indexOf(" round")>-1?(l.width=26,l.height=26,l.title=""):l.type.indexOf(" rhomb")>0?(l.width=30,l.height=30,l.title=""):"group"===l.type?(l.width=200,l.height=100):"memo"===l.type?(l.width=140,l.height=54):r='<table cellspacing="1" style="width:'+(l.width*e.scale-2)+"px;height:"+(l.height*e.scale-2)+'px;"><tr><td class="ico"><i class="ico_'+l.type+'"></i></td><td><div>'+l.title+"</div></td></tr></table>";""===r&&(r='<table cellspacing="0" style="width:'+(l.width*e.scale-2)+"px;height:"+(l.height*e.scale-2)+'px;"><tr><td class="ico"><i class="ico_'+l.type+'"></i> '+l.title+"</td></tr></table>"),e.$refs.$ghost.setData("type",i),e.$refs.$ghost.html(r),e.$refs.$ghost.css({cursor:"move"}),e._bindMoveEvent(t,l,function(t,o,i,s,r){if(o.$refs.$ghost.removeData("type"),!(s<0||r<0)&&t){if("group"===l.type){o.switchToolBtn("group");o.addArea((new Date).getTime(),{name:o.prop.$areaPrefix+o.prop.$max,left:s/o.scale,top:r/o.scale,color:["red","yellow","blue","green","milk"][o.prop.$max%5],width:200,height:100})}else"memo"===l.type?(o.switchToolBtn("memo"),o.addMemo((new Date).getTime(),{text:"",left:s/o.scale,top:r/o.scale,width:140,height:54})):(o.switchToolBtn("cursor"),e.addNode((new Date).getTime(),{name:o.prop.$nodePrefix+o.prop.$max,left:s/o.scale,top:r/o.scale,width:l.width,height:l.height,type:l.type}));o.prop.$max++}},"move",l.width,l.height)}})}}}},Le={name:"DemoDragadd",components:{GooFlow:B},data:function(){return{myProps:{id:"aaaabbb",width:"900",height:"600",haveHead:!0,headLabel:!0,headBtns:["new","open","save","undo","redo","reload","print"],haveTool:!0,dragAddOper:!0,useOperStack:!0,haveMulti:!0,haveDirDashed:!0,haveSegment:!0,haveSegDashed:!0,toolBtns:["start round mix","end round","task","node","huber","router","plug2"],nodeCustoms:{huber:{class:"custom_huber",width:102,height:50},router:{class:"custom_router",width:115,height:52}},auth:H},global:O,plugIns:[W,P,R,Fe,z]}},mounted:function(){var e=this.$refs.gooFlow;G.a.get("./static/demo/data2.json",{},{headers:{"Content-Type":"application/json"}}).then(function(t){e.loadData(t.data)}),e.bindOperEvent({onPrintClick:function(){e.print()}})}},Be={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"DemoDragadd"}},[t("goo-flow",{ref:"gooFlow",attrs:{property:this.myProps,global:this.global,plugIns:this.plugIns}},[t("div",{staticStyle:{float:"right","margin-right":"15px"},attrs:{slot:"headerCustom"},slot:"headerCustom"},[this._v("拖拽式添加块状元素操作方式")])])],1)},staticRenderFns:[]};var Ee=o("VU/8")(Le,Be,!1,function(e){o("PPur")},null,null).exports;i.a.use(n.a);var Oe=new n.a({routes:[{path:"/",name:"HelloWorld",component:p,meta:{title:"GooFlow流程设计器 vue版 version:1.0"}},{path:"/base",name:"DemoBase",component:U,meta:{title:"基本功能使用"}},{path:"/import",name:"DemoImport",component:J,meta:{title:"简单的载入数据"}},{path:"/dragadd",name:"DemoDragadd",component:Ee,meta:{title:"拖拽操作方式添加块元素"}},{path:"/readonly",name:"DemoReadonly",component:K,meta:{title:"只读模式"}},{path:"/spnode",name:"DemoSpnode",component:ne,meta:{title:"特殊形状的节点"}},{path:"/custom",name:"DemoCustom",component:he,meta:{title:"自定义背景图节点"}},{path:"/multi",name:"DemoMulti",component:fe,meta:{title:"多选功能操作示例"}},{path:"/navmap",name:"DemoNavmap",component:$e,meta:{title:"实时的缩略导航图"}},{path:"/export",name:"DemoExport",component:be,meta:{title:"流程图导出图片示例"}},{path:"/xml",name:"DemoXml",component:De,meta:{title:"XML数据支持示例"}}]});Oe.afterEach(function(e,t){window.document.title=e.meta.title+" GooFlow-vue"});var We=Oe;i.a.config.productionTip=!1,new i.a({el:"#app",router:We,components:{App:r},template:"<App/>"})},PPur:function(e,t){},S3Sd:function(e,t){},WtsI:function(e,t){},cAeq:function(e,t){},knFB:function(e,t){},"nk+h":function(e,t){},qcsU:function(e,t){},ubSq:function(e,t){}},["NHnr"]);